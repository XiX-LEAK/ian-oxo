var Ce=Object.defineProperty;var Ee=(r,s,t)=>s in r?Ce(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t;var W=(r,s,t)=>Ee(r,typeof s!="symbol"?s+"":s,t);import{r as h,a as Me,g as Pe,R as xe}from"./vendor-CIP6LD3P.js";import{A as U,m as i,u as he,a as ge}from"./animations-DTiOPVJs.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}})();var fe={exports:{}},G={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Le=h,Oe=Symbol.for("react.element"),_e=Symbol.for("react.fragment"),Te=Object.prototype.hasOwnProperty,ze=Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$e={key:!0,ref:!0,__self:!0,__source:!0};function ye(r,s,t){var o,a={},n=null,l=null;t!==void 0&&(n=""+t),s.key!==void 0&&(n=""+s.key),s.ref!==void 0&&(l=s.ref);for(o in s)Te.call(s,o)&&!$e.hasOwnProperty(o)&&(a[o]=s[o]);if(r&&r.defaultProps)for(o in s=r.defaultProps,s)a[o]===void 0&&(a[o]=s[o]);return{$$typeof:Oe,type:r,key:n,ref:l,props:a,_owner:ze.current}}G.Fragment=_e;G.jsx=ye;G.jsxs=ye;fe.exports=G;var e=fe.exports,ae={},ie=Me;ae.createRoot=ie.createRoot,ae.hydrateRoot=ie.hydrateRoot;var Re={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ue=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I=(r,s)=>{const t=h.forwardRef(({color:o="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:l,children:g,...u},m)=>h.createElement("svg",{ref:m,...Re,width:a,height:a,stroke:o,strokeWidth:l?Number(n)*24/Number(a):n,className:`lucide lucide-${Ue(r)}`,...u},[...s.map(([c,N])=>h.createElement(c,N)),...(Array.isArray(g)?g:[g])||[]]));return t.displayName=`${r}`,t},J=I("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),K=I("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),He=I("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Fe=I("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),De=I("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),qe=I("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]),le=I("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),F=I("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),D=I("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ve=I("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Be=I("Globe2",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3v0a2 2 0 0 1 2 2v0c0 1.1.9 2 2 2v0a2 2 0 0 0 2-2v0c0-1.1.9-2 2-2h3.17",key:"1fi5u6"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2v0a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"xsiumc"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Je=I("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),We=I("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),P=I("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ce=I("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),be=I("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Xe=I("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Q=I("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),ve=I("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),X=I("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),oe=I("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ge=I("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ke=I("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_=I("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Ye=I("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),H=I("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),q=I("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ze={},de=r=>{let s;const t=new Set,o=(c,N)=>{const w=typeof c=="function"?c(s):c;if(!Object.is(w,s)){const y=s;s=N??(typeof w!="object"||w===null)?w:Object.assign({},s,w),t.forEach(b=>b(s,y))}},a=()=>s,u={setState:o,getState:a,getInitialState:()=>m,subscribe:c=>(t.add(c),()=>t.delete(c)),destroy:()=>{(Ze?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},m=s=r(o,a,u);return u},Qe=r=>r?de(r):de;var we={exports:{}},je={},Ne={exports:{}},Se={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V=h;function et(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var tt=typeof Object.is=="function"?Object.is:et,st=V.useState,rt=V.useEffect,at=V.useLayoutEffect,ot=V.useDebugValue;function nt(r,s){var t=s(),o=st({inst:{value:t,getSnapshot:s}}),a=o[0].inst,n=o[1];return at(function(){a.value=t,a.getSnapshot=s,ee(a)&&n({inst:a})},[r,t,s]),rt(function(){return ee(a)&&n({inst:a}),r(function(){ee(a)&&n({inst:a})})},[r]),ot(t),t}function ee(r){var s=r.getSnapshot;r=r.value;try{var t=s();return!tt(r,t)}catch{return!0}}function it(r,s){return s()}var lt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?it:nt;Se.useSyncExternalStore=V.useSyncExternalStore!==void 0?V.useSyncExternalStore:lt;Ne.exports=Se;var ct=Ne.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y=h,dt=ct;function ut(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var mt=typeof Object.is=="function"?Object.is:ut,pt=dt.useSyncExternalStore,xt=Y.useRef,ht=Y.useEffect,gt=Y.useMemo,ft=Y.useDebugValue;je.useSyncExternalStoreWithSelector=function(r,s,t,o,a){var n=xt(null);if(n.current===null){var l={hasValue:!1,value:null};n.current=l}else l=n.current;n=gt(function(){function u(y){if(!m){if(m=!0,c=y,y=o(y),a!==void 0&&l.hasValue){var b=l.value;if(a(b,y))return N=b}return N=y}if(b=N,mt(c,y))return b;var d=o(y);return a!==void 0&&a(b,d)?(c=y,b):(c=y,N=d)}var m=!1,c,N,w=t===void 0?null:t;return[function(){return u(s())},w===null?void 0:function(){return u(w())}]},[s,t,o,a]);var g=pt(r,n[0],n[1]);return ht(function(){l.hasValue=!0,l.value=g},[g]),ft(g),g};we.exports=je;var yt=we.exports;const bt=Pe(yt),ke={},{useDebugValue:vt}=xe,{useSyncExternalStoreWithSelector:wt}=bt;let ue=!1;const jt=r=>r;function Nt(r,s=jt,t){(ke?"production":void 0)!=="production"&&t&&!ue&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ue=!0);const o=wt(r.subscribe,r.getState,r.getServerState||r.getInitialState,s,t);return vt(o),o}const me=r=>{(ke?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const s=typeof r=="function"?Qe(r):r,t=(o,a)=>Nt(s,o,a);return Object.assign(t,s),t},ne=r=>r?me(r):me,St={};function kt(r,s){let t;try{t=r()}catch{return}return{getItem:a=>{var n;const l=u=>u===null?null:JSON.parse(u,void 0),g=(n=t.getItem(a))!=null?n:null;return g instanceof Promise?g.then(l):l(g)},setItem:(a,n)=>t.setItem(a,JSON.stringify(n,void 0)),removeItem:a=>t.removeItem(a)}}const B=r=>s=>{try{const t=r(s);return t instanceof Promise?t:{then(o){return B(o)(t)},catch(o){return this}}}catch(t){return{then(o){return this},catch(o){return B(o)(t)}}}},At=(r,s)=>(t,o,a)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:p=>p,version:0,merge:(p,j)=>({...j,...p}),...s},l=!1;const g=new Set,u=new Set;let m;try{m=n.getStorage()}catch{}if(!m)return r((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),t(...p)},o,a);const c=B(n.serialize),N=()=>{const p=n.partialize({...o()});let j;const v=c({state:p,version:n.version}).then(S=>m.setItem(n.name,S)).catch(S=>{j=S});if(j)throw j;return v},w=a.setState;a.setState=(p,j)=>{w(p,j),N()};const y=r((...p)=>{t(...p),N()},o,a);let b;const d=()=>{var p;if(!m)return;l=!1,g.forEach(v=>v(o()));const j=((p=n.onRehydrateStorage)==null?void 0:p.call(n,o()))||void 0;return B(m.getItem.bind(m))(n.name).then(v=>{if(v)return n.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==n.version){if(n.migrate)return n.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var S;return b=n.merge(v,(S=o())!=null?S:y),t(b,!0),N()}).then(()=>{j==null||j(b,void 0),l=!0,u.forEach(v=>v(b))}).catch(v=>{j==null||j(void 0,v)})};return a.persist={setOptions:p=>{n={...n,...p},p.getStorage&&(m=p.getStorage())},clearStorage:()=>{m==null||m.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>d(),hasHydrated:()=>l,onHydrate:p=>(g.add(p),()=>{g.delete(p)}),onFinishHydration:p=>(u.add(p),()=>{u.delete(p)})},d(),b||y},It=(r,s)=>(t,o,a)=>{let n={storage:kt(()=>localStorage),partialize:d=>d,version:0,merge:(d,p)=>({...p,...d}),...s},l=!1;const g=new Set,u=new Set;let m=n.storage;if(!m)return r((...d)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),t(...d)},o,a);const c=()=>{const d=n.partialize({...o()});return m.setItem(n.name,{state:d,version:n.version})},N=a.setState;a.setState=(d,p)=>{N(d,p),c()};const w=r((...d)=>{t(...d),c()},o,a);a.getInitialState=()=>w;let y;const b=()=>{var d,p;if(!m)return;l=!1,g.forEach(v=>{var S;return v((S=o())!=null?S:w)});const j=((p=n.onRehydrateStorage)==null?void 0:p.call(n,(d=o())!=null?d:w))||void 0;return B(m.getItem.bind(m))(n.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==n.version){if(n.migrate)return[!0,n.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var S;const[x,A]=v;if(y=n.merge(A,(S=o())!=null?S:w),t(y,!0),x)return c()}).then(()=>{j==null||j(y,void 0),y=o(),l=!0,u.forEach(v=>v(y))}).catch(v=>{j==null||j(void 0,v)})};return a.persist={setOptions:d=>{n={...n,...d},d.storage&&(m=d.storage)},clearStorage:()=>{m==null||m.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>b(),hasHydrated:()=>l,onHydrate:d=>(g.add(d),()=>{g.delete(d)}),onFinishHydration:d=>(u.add(d),()=>{u.delete(d)})},n.skipHydration||b(),y||w},Ct=(r,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((St?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),At(r,s)):It(r,s),Ae=Ct;console.log("🚀 Database Service - SYSTÈME PROPRE !");const te={sitePassword:"oxo2024",adminPassword:"oxo2025admin",agents:[{id:"1",name:"Agent Demo",identifier:"demo@oxo.com",phone_number:"+33 1 23 45 67 89",email:"demo@oxo.com",website_url:"https://example.com",about:"Agent de démonstration",categories:["Tech","Business"],platforms:["LinkedIn","Email"],internal_notes:"Notes internes demo",created_at:new Date().toISOString()}]};class Et{constructor(){W(this,"data",te);W(this,"storageKey","oxo-database");this.loadData(),console.log("✅ Database Service initialisé avec",this.data.agents.length,"agents")}loadData(){try{const s=localStorage.getItem(this.storageKey);s?this.data={...te,...JSON.parse(s)}:this.saveData()}catch{console.log("⚠️ Données par défaut utilisées"),this.data=te,this.saveData()}}saveData(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.data)),console.log("💾 Données sauvegardées")}catch(s){console.error("❌ Erreur sauvegarde:",s)}}getSitePassword(){return this.data.sitePassword}setSitePassword(s){try{return this.data.sitePassword=s,this.saveData(),console.log("✅ Mot de passe site modifié:",s),!0}catch(t){return console.error("❌ Erreur modification mot de passe site:",t),!1}}getAdminPassword(){return this.data.adminPassword}setAdminPassword(s){try{return this.data.adminPassword=s,this.saveData(),console.log("✅ Mot de passe admin modifié:",s),!0}catch(t){return console.error("❌ Erreur modification mot de passe admin:",t),!1}}async getAll(){try{return console.log("📋 Récupération de",this.data.agents.length,"agents"),{data:[...this.data.agents],error:null}}catch(s){return console.error("❌ Erreur récupération agents:",s),{data:[],error:s}}}async create(s){try{const t={id:Date.now().toString(),name:s.name,identifier:s.identifier,phone_number:s.phone_number||s.phoneNumber,email:s.email,website_url:s.website_url||s.websiteUrl,about:s.description||s.about_description||s.about,internal_notes:s.internal_notes||s.notes,platforms:s.platforms||[s.platform],categories:s.categories||[s.category],created_at:new Date().toISOString()};return this.data.agents.push(t),this.saveData(),console.log("✅ Agent créé:",t.name),{data:[t],error:null}}catch(t){return console.error("❌ Erreur création agent:",t),{data:[],error:t}}}async update(s,t){try{console.log("🔄 Début modification agent:",s),console.log("📦 Updates reçus:",t);const o=this.data.agents.findIndex(n=>n.id===s||String(n.id)===String(s));if(o===-1)return console.error("❌ Agent non trouvé:",s),{data:[],error:new Error("Agent non trouvé")};console.log("📍 Agent trouvé à l'index:",o);const a={};return t.name&&(a.name=t.name),t.identifier&&(a.identifier=t.identifier),(t.phone_number||t.phoneNumber)&&(a.phone_number=t.phone_number||t.phoneNumber),t.email&&(a.email=t.email),(t.website_url||t.websiteUrl)&&(a.website_url=t.website_url||t.websiteUrl),(t.description||t.about_description||t.about)&&(a.about=t.description||t.about_description||t.about),(t.internal_notes||t.notes)&&(a.internal_notes=t.internal_notes||t.notes),t.platforms?a.platforms=t.platforms:t.platform&&(a.platforms=[t.platform]),t.categories?a.categories=t.categories:t.category&&(a.categories=[t.category]),console.log("🔄 Updates transformés:",a),this.data.agents[o]={...this.data.agents[o],...a},this.saveData(),console.log("✅ Agent modifié avec succès:",s),{data:[this.data.agents[o]],error:null}}catch(o){return console.error("❌ Erreur modification agent:",o),{data:[],error:o}}}async delete(s){try{console.log("🗑️ DELETE - ID reçu:",s,"type:",typeof s),console.log("📋 Agents avant suppression:",this.data.agents.length),console.log("🔍 IDs existants:",this.data.agents.map(o=>`${o.id} (${typeof o.id})`));const t=this.data.agents.length;return this.data.agents=this.data.agents.filter(o=>{const a=o.id!==s&&o.id!==String(s)&&String(o.id)!==String(s);return a||console.log("🎯 Agent trouvé pour suppression:",o.id,o.name),a}),console.log("📋 Agents après suppression:",this.data.agents.length),this.data.agents.length<t?(this.saveData(),console.log("✅ Agent supprimé avec succès:",s),{data:{id:s},error:null}):(console.error("❌ Aucun agent trouvé avec ID:",s),{data:null,error:new Error("Agent non trouvé avec ID: "+s)})}catch(t){return console.error("❌ Erreur suppression agent:",t),{data:null,error:t}}}async getOne(s){try{return{data:this.data.agents.find(o=>o.id===s)||null,error:null}}catch(t){return{data:null,error:t}}}}const E=new Et;class R{static async getSetting(s){try{return s==="site_password"?E.getSitePassword():s==="admin_password"?E.getAdminPassword():null}catch(t){return console.error(`Erreur récupération paramètre ${s}:`,t),null}}static async setSetting(s,t){try{return s==="site_password"?E.setSitePassword(t):s==="admin_password"?E.setAdminPassword(t):(console.log(`✅ Paramètre ${s} sauvegardé:`,t),!0)}catch(o){return console.error(`Erreur sauvegarde paramètre ${s}:`,o),!1}}static async getAllSettings(){try{return{site_password:E.getSitePassword(),admin_password:E.getAdminPassword()}}catch(s){return console.error("Erreur récupération de tous les paramètres:",s),{}}}static async getSitePassword(){return E.getSitePassword()}static async setSitePassword(s){return E.setSitePassword(s)}static async getAdminPassword(){return E.getAdminPassword()}static async setAdminPassword(s){return E.setAdminPassword(s)}static async initializeDefaultSettings(){try{console.log("✅ Paramètres par défaut initialisés")}catch(s){console.error("Erreur initialisation paramètres par défaut:",s)}}}const $=ne()(Ae((r,s)=>({user:null,isLoading:!1,error:null,mode:"visitor",hasAccessToSite:!1,sitePassword:"oxo2024",sessionId:null,initializeAuth:async()=>{try{console.log("🔄 Initialisation de l'authentification..."),await R.initializeDefaultSettings();const t=await R.getSitePassword();r({sitePassword:t,error:null}),console.log("✅ Authentification initialisée")}catch(t){console.error("❌ Erreur initialisation auth:",t);const o=localStorage.getItem("oxo-site-password")||"oxo2024";r({sitePassword:o,error:null})}},logout:()=>{r({user:null,mode:"visitor",error:null,hasAccessToSite:!1}),console.log("🚪 Déconnexion réussie")},switchToVisitor:()=>{s().user&&(r({mode:"visitor",error:null}),console.log("🔄 Basculé en mode visiteur"))},switchToAdmin:async t=>{try{const o=await s().getAdminPassword();return t!==o?(r({error:"Mot de passe administrateur incorrect"}),!1):(r({mode:"admin",user:{id:"admin-local",email:"admin@oxo.local",username:"admin",role:"admin",isAuthenticated:!0,lastLogin:new Date},hasAccessToSite:!0,error:null}),console.log("🔑 Mode admin activé"),!0)}catch(o){return console.error("❌ Erreur switchToAdmin:",o),r({error:"Erreur lors de la vérification du mot de passe admin"}),!1}},updateSitePassword:async t=>{r({isLoading:!0,error:null}),s().user;try{const a=await s().getSitePassword();if(await R.setSitePassword(t))return localStorage.setItem("oxo-site-password",t),r({sitePassword:t,isLoading:!1,error:null}),console.log("✅ Mot de passe du site mis à jour dans Supabase et localStorage + log enregistré"),!0;throw new Error("Échec sauvegarde Supabase")}catch(a){return console.error("❌ Erreur mise à jour mot de passe site:",a),localStorage.setItem("oxo-site-password",t),r({sitePassword:t,isLoading:!1,error:"Sauvegardé localement seulement (Supabase indisponible)"}),console.log("⚠️ Mot de passe du site sauvegardé en localStorage uniquement"),!0}},updateAdminPassword:async t=>{r({isLoading:!0,error:null}),s().user;try{const a=await s().getAdminPassword();if(await R.setAdminPassword(t))return localStorage.setItem("oxo-admin-password",t),r({isLoading:!1,error:null}),console.log("✅ Mot de passe admin mis à jour dans Supabase et localStorage + log enregistré"),!0;throw new Error("Échec sauvegarde Supabase")}catch(a){return console.error("❌ Erreur mise à jour mot de passe admin:",a),localStorage.setItem("oxo-admin-password",t),r({isLoading:!1,error:"Sauvegardé localement seulement (Supabase indisponible)"}),console.log("⚠️ Mot de passe admin sauvegardé en localStorage uniquement"),!0}},getSitePassword:async()=>{try{const t=await R.getSitePassword();return t||localStorage.getItem("oxo-site-password")||"oxo2024"}catch(t){return console.error("Erreur récupération mot de passe site:",t),localStorage.getItem("oxo-site-password")||"oxo2024"}},getAdminPassword:async()=>{try{const t=await R.getAdminPassword();return t||localStorage.getItem("oxo-admin-password")||"oxo2025admin"}catch(t){return console.error("Erreur récupération mot de passe admin:",t),localStorage.getItem("oxo-admin-password")||"oxo2025admin"}},checkSitePassword:async t=>{try{const o=await s().getSitePassword(),a=t===o;return a?(r({hasAccessToSite:!0,error:null}),console.log("✅ Mot de passe du site validé")):(r({error:"Mot de passe du site incorrect"}),console.log("❌ Mot de passe du site incorrect")),a}catch(o){return console.error("Erreur vérification mot de passe site:",o),r({error:"Erreur lors de la vérification du mot de passe"}),!1}},generateNewSession:()=>{const t=Date.now().toString()+Math.random().toString(36).substr(2,9);return r({sessionId:t}),localStorage.setItem("oxo-session-id",t),localStorage.setItem("oxo-session-timestamp",Date.now().toString()),t},checkSessionValidity:()=>{const t=localStorage.getItem("oxo-session-id"),o=localStorage.getItem("oxo-session-timestamp"),a=s();return!t||!o||!a.sessionId?!1:t===a.sessionId},forceLogout:()=>{try{localStorage.removeItem("oxo-session-id"),localStorage.removeItem("oxo-session-timestamp"),localStorage.removeItem("oxo-auth-storage"),r({user:null,mode:"visitor",hasAccessToSite:!1,sessionId:null,sitePassword:localStorage.getItem("oxo-site-password")||"oxo2024",isLoading:!1,error:null}),console.log("🔐 DÉCONNEXION FORCÉE COMPLÈTE - Toutes les données effacées"),setTimeout(()=>{window.location.pathname!=="/"&&(window.location.href="/")},100)}catch(t){console.error("Erreur lors du nettoyage:",t),r({user:null,mode:"visitor",hasAccessToSite:!1,sessionId:null,error:null})}},setError:t=>r({error:t}),setErrorWithTimeout:(t,o=3e3)=>{r({error:t}),setTimeout(()=>{r({error:null})},o)},clearError:()=>r({error:null})}),{name:"oxo-auth-storage",partialize:r=>({hasAccessToSite:r.hasAccessToSite,sitePassword:r.sitePassword,mode:r.mode,user:r.user}),onRehydrateStorage:()=>r=>{if(r&&r.hasAccessToSite){const s=localStorage.getItem("oxo-login-time"),t=60*60*1e3;s?Date.now()-parseInt(s)>t?(r.hasAccessToSite=!1,r.user=null,r.mode="visitor",localStorage.removeItem("oxo-login-time"),console.log("🚪 Store rehydraté - Session expirée")):console.log("✅ Store rehydraté - Session valide"):(r.hasAccessToSite=!1,r.user=null,r.mode="visitor",console.log("🚪 Store rehydraté - Pas de session valide"))}else console.log("✅ Store rehydraté - Utilisateur déconnecté")}})),Mt=({isOpen:r,onClose:s,mode:t="site-password",onSuccess:o})=>{const[a,n]=h.useState(""),[l,g]=h.useState(!1),[u,m]=h.useState(""),[c,N]=h.useState(!1),{switchToAdmin:w,checkSitePassword:y,isLoading:b,error:d,clearError:p}=$(),j=async O=>{if(O.preventDefault(),p(),t==="admin"){await w(a)&&(s(),v(),o==null||o());return}t==="site-password"&&await y(u)&&(s(),v(),o==null||o())},v=()=>{n(""),m(""),g(!1),N(!1)},S={hidden:{opacity:0,scale:.8,y:50},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:500}},exit:{opacity:0,scale:.8,y:50,transition:{duration:.2}}},x={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},A=()=>t==="admin"?"Mode Administrateur":"Accès au Site",C=()=>t==="admin"?"Entrez le mot de passe admin pour accéder aux fonctionnalités d'édition":"Entrez le mot de passe du site pour accéder à l'annuaire d'agents";return e.jsx(U,{children:r&&e.jsxs(i.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",variants:x,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsx(i.div,{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:s}),e.jsx(i.div,{className:"relative w-full max-w-md",variants:S,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl relative border border-gray-100",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 via-orange-600 to-red-500 rounded-t-2xl px-8 py-10 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.3)_0%,transparent_50%)]"})}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-white/20 transition-colors text-white",children:e.jsx(q,{className:"w-5 h-5"})}),e.jsxs(i.div,{className:"mx-auto w-24 h-24 bg-white/15 backdrop-blur-sm rounded-3xl flex items-center justify-center mb-8 border border-white/20 shadow-2xl relative",animate:{rotate:[0,2,-2,0],scale:[1,1.02,1],boxShadow:["0 0 20px rgba(255,255,255,0.2)","0 0 40px rgba(255,255,255,0.4)","0 0 20px rgba(255,255,255,0.2)"]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},whileHover:{scale:1.15,rotate:5,boxShadow:"0 0 60px rgba(255,255,255,0.6)",transition:{duration:.4}},children:[e.jsx(i.div,{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-white/20 to-orange-200/30",animate:{rotate:[0,360]},transition:{duration:8,repeat:1/0,ease:"linear"}}),t==="admin"?e.jsx(_,{className:"w-12 h-12 text-white relative z-10 drop-shadow-lg"}):e.jsx(P,{className:"w-12 h-12 text-white relative z-10 drop-shadow-lg"})]}),e.jsx(i.h2,{className:"text-4xl font-bold text-white mb-4 tracking-tight relative z-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)",background:"linear-gradient(135deg, #ffffff 0%, #fef3c7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:A()}),e.jsx(i.p,{className:"text-orange-50 text-lg font-medium relative z-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:C()})]}),e.jsxs("div",{className:"p-10 bg-gradient-to-b from-gray-50 to-white",children:[d&&e.jsxs(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center space-x-3",children:[e.jsx(J,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-red-700 text-sm",children:d})]}),e.jsxs(i.form,{onSubmit:j,className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsxs(i.div,{className:"space-y-5",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,staggerChildren:.1},children:[t==="site-password"&&e.jsxs("div",{children:[e.jsxs(i.label,{className:"block text-base font-bold text-gray-800 mb-4 flex items-center space-x-2",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.4},children:[e.jsx(P,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{children:"Mot de passe du site"})]}),e.jsxs(i.div,{className:"relative group",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:[e.jsx(P,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-orange-500 transition-all duration-300"}),e.jsx("input",{type:c?"text":"password",value:u,onChange:O=>m(O.target.value),className:"w-full h-14 pl-12 pr-14 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all duration-300 text-lg font-medium bg-white shadow-sm hover:shadow-md placeholder-gray-400 text-gray-900",placeholder:"Entrez le mot de passe du site",required:!0}),e.jsx("button",{type:"button",onClick:()=>N(!c),className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-2 rounded-lg hover:bg-gray-100 transition-colors text-gray-500 hover:text-orange-500",children:c?e.jsx(D,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]})]}),t==="admin"&&e.jsxs("div",{children:[e.jsxs(i.label,{className:"block text-base font-bold text-gray-800 mb-4 flex items-center space-x-2",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.4},children:[e.jsx(_,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{children:"Mot de passe administrateur"})]}),e.jsxs(i.div,{className:"relative group",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:[e.jsx(_,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition-all duration-300"}),e.jsx("input",{type:l?"text":"password",value:a,onChange:O=>n(O.target.value),className:"w-full h-14 pl-12 pr-14 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:ring-4 focus:ring-purple-100 transition-all duration-300 text-lg font-medium bg-white shadow-sm hover:shadow-md placeholder-gray-400 text-gray-900",placeholder:"Mot de passe admin",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!l),className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-2 rounded-lg hover:bg-gray-100 transition-colors text-gray-500 hover:text-purple-500",children:l?e.jsx(D,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]})]})]}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:e.jsxs(i.button,{type:"submit",disabled:b,className:"w-full h-16 text-lg font-bold relative overflow-hidden shadow-xl bg-gradient-to-r from-orange-500 via-orange-600 to-red-500 hover:from-orange-600 hover:via-orange-700 hover:to-red-600 rounded-xl text-white transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.03,y:-3,boxShadow:"0 15px 35px rgba(249, 115, 22, 0.4)",filter:"brightness(1.1)"},whileTap:{scale:.97},transition:{type:"spring",stiffness:400,damping:15},children:[e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12",animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:1,ease:"easeInOut"}}),e.jsx("div",{className:"relative z-10",children:b?e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx(i.div,{className:"w-6 h-6 border-3 border-white/30 border-t-white rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),e.jsx("span",{className:"text-lg",children:"Connexion en cours..."})]}):e.jsxs(i.div,{className:"flex items-center justify-center space-x-3",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[e.jsx(i.span,{className:"text-2xl",animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:t==="admin"?"🔑":""}),e.jsx("span",{className:"text-lg font-bold",children:t==="admin"?"Accéder au mode admin":"Accéder au site"})]})})]})})]}),e.jsxs(i.div,{className:"mt-10 pt-8 border-t border-gray-200 space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[e.jsxs("div",{className:"text-center bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-6 border border-orange-100",children:[e.jsxs(i.div,{className:"flex items-center justify-center space-x-3 mb-3",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Connexion Sécurisée"})]}),e.jsx("p",{className:"text-sm text-gray-600 font-medium leading-relaxed",children:t==="admin"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Panel d'administration"})," • Gestion complète de la plateforme"]}):e.jsxs(e.Fragment,{children:["✨ ",e.jsx("strong",{children:"Accès exclusif"})," • Base de données d'agents vérifiés"]})})]}),t==="site-password"&&e.jsxs(i.div,{className:"text-center bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border border-purple-200",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:1},children:[e.jsxs(i.div,{className:"flex items-center justify-center space-x-2 mb-4",animate:{y:[0,-2,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[e.jsx("span",{className:"text-2xl",children:"🔐"}),e.jsx("h3",{className:"font-bold text-gray-800",children:"Pas d'accès ?"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:["Le ",e.jsx("strong",{children:"mot de passe change régulièrement"})," pour la sécurité.",e.jsx("br",{}),"Rejoignez notre ",e.jsx("strong",{children:"communauté exclusive"})," pour obtenir l'accès !"]}),e.jsxs(i.a,{href:"https://whop.com/oxo/presentation-oxo-XeNskuhecJ4ew0/app/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold px-6 py-3 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl",whileHover:{scale:1.05,boxShadow:"0 10px 25px rgba(147, 51, 234, 0.3)"},whileTap:{scale:.95},children:[e.jsx("span",{className:"text-xl",children:"🚀"}),e.jsx("span",{children:"Rejoindre la communauté OXO"}),e.jsx(i.span,{animate:{x:[0,3,0]},transition:{duration:1.5,repeat:1/0},children:"→"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Accès immédiat • Support 24/7 • Communauté active"})]})]})]})]})})]})})},Pt=({isOpen:r,onClose:s})=>{const[t,o]=h.useState("site"),[a,n]=h.useState(""),[l,g]=h.useState(""),[u,m]=h.useState(""),[c,N]=h.useState(!1),[w,y]=h.useState(""),[b,d]=h.useState(!1),[p,j]=h.useState(!1),{updateSitePassword:v,updateAdminPassword:S,getSitePassword:x,getAdminPassword:A,mode:C}=$(),O=async k=>{if(k.preventDefault(),y(""),j(!0),!a||!l||!u){y("Veuillez remplir tous les champs"),j(!1);return}if(l!==u){y("Les nouveaux mots de passe ne correspondent pas"),j(!1);return}if(l.length<6){y("Le nouveau mot de passe doit contenir au moins 6 caractères"),j(!1);return}if(a===l){y("Le nouveau mot de passe doit être différent de l'ancien"),j(!1);return}try{const L=t==="site"?await x():await A();if(a!==L){y("Le mot de passe actuel est incorrect"),j(!1);return}(t==="site"?await v(l):await S(l))&&(d(!0),setTimeout(()=>{f(),s()},2e3))}catch{y("Erreur lors de la mise à jour du mot de passe")}j(!1)},f=()=>{o("site"),n(""),g(""),m(""),y(""),d(!1),N(!1)};return e.jsx(U,{children:r&&e.jsxs(i.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(i.div,{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:s}),e.jsx(i.div,{className:"relative w-full max-w-md",initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:50},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl relative border border-gray-100",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-t-2xl px-8 py-8 text-center relative",children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-white/20 transition-colors text-white",children:e.jsx(q,{className:"w-5 h-5"})}),e.jsx("div",{className:"mx-auto w-20 h-20 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center mb-6 border border-white/30",children:e.jsx(P,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Gestion des mots de passe"}),e.jsx("p",{className:"text-orange-100 text-lg",children:"Modifiez les mots de passe du site et d'administration"})]}),e.jsxs("div",{className:"p-8",children:[w&&e.jsxs(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center space-x-3",children:[e.jsx(J,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-red-700 text-sm",children:w})]}),b&&e.jsxs(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center space-x-3",children:[e.jsx(K,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-green-700 text-sm",children:"Mot de passe mis à jour avec succès !"})]}),C==="admin"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Type de mot de passe à modifier"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(i.button,{type:"button",onClick:()=>o("site"),className:`p-4 rounded-xl border-2 transition-all duration-300 flex items-center space-x-3 ${t==="site"?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 hover:border-gray-300 text-gray-600"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(P,{className:"w-5 h-5"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Mot de passe du site"}),e.jsx("div",{className:"text-sm opacity-75",children:"Accès visiteurs"})]})]}),e.jsxs(i.button,{type:"button",onClick:()=>o("admin"),className:`p-4 rounded-xl border-2 transition-all duration-300 flex items-center space-x-3 ${t==="admin"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-gray-300 text-gray-600"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(_,{className:"w-5 h-5"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Mot de passe admin"}),e.jsx("div",{className:"text-sm opacity-75",children:"Mode administration"})]})]})]})]}),e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:t==="site"?"Mot de passe actuel du site":"Mot de passe administrateur actuel"}),e.jsxs("div",{className:"relative group",children:[t==="site"?e.jsx(P,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-orange-500 transition-colors z-10"}):e.jsx(_,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition-colors z-10"}),e.jsx("input",{type:c?"text":"password",value:a,onChange:k=>n(k.target.value),className:`w-full h-12 pl-12 pr-12 border-2 border-gray-200 rounded-xl focus:ring-4 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300 ${t==="site"?"focus:ring-orange-300 focus:border-orange-500":"focus:ring-purple-300 focus:border-purple-500"}`,placeholder:t==="site"?"Mot de passe actuel du site":"Mot de passe admin actuel",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:t==="site"?"Nouveau mot de passe du site":"Nouveau mot de passe admin"}),e.jsxs("div",{className:"relative group",children:[t==="site"?e.jsx(P,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-orange-500 transition-colors z-10"}):e.jsx(_,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition-colors z-10"}),e.jsx("input",{type:c?"text":"password",value:l,onChange:k=>g(k.target.value),className:`w-full h-12 pl-12 pr-12 border-2 border-gray-200 rounded-xl focus:ring-4 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300 ${t==="site"?"focus:ring-orange-300 focus:border-orange-500":"focus:ring-purple-300 focus:border-purple-500"}`,placeholder:"Nouveau mot de passe (min. 6 caractères)",required:!0,minLength:6})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Confirmer le nouveau mot de passe"}),e.jsxs("div",{className:"relative group",children:[t==="site"?e.jsx(P,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-orange-500 transition-colors z-10"}):e.jsx(_,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition-colors z-10"}),e.jsx("input",{type:c?"text":"password",value:u,onChange:k=>m(k.target.value),className:`w-full h-12 pl-12 pr-12 border-2 border-gray-200 rounded-xl focus:ring-4 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300 ${t==="site"?"focus:ring-orange-300 focus:border-orange-500":"focus:ring-purple-300 focus:border-purple-500"}`,placeholder:"Confirmer le nouveau mot de passe",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>N(!c),className:`absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 z-10 hover:${t==="site"?"text-orange-500":"text-purple-500"}`,children:c?e.jsx(D,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]})]})]}),e.jsx(i.button,{type:"submit",disabled:p||b,className:"btn-primary w-full h-12 text-base font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:p?e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"loading-spinner w-5 h-5"}),e.jsx("span",{children:"Mise à jour..."})]}):b?"✅ Mis à jour !":`${t==="site"?"🔐":"🛡️"} Changer le mot de passe ${t==="site"?"du site":"admin"}`})]}),e.jsx("div",{className:`mt-6 p-4 rounded-xl border-2 ${t==="site"?"bg-orange-50 border-orange-200":"bg-purple-50 border-purple-200"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`text-2xl ${t==="site"?"text-orange-500":"text-purple-500"}`,children:t==="site"?"💡":"🛡️"}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold text-sm mb-2 ${t==="site"?"text-orange-700":"text-purple-700"}`,children:t==="site"?"Mot de passe du site":"Mot de passe administrateur"}),e.jsx("p",{className:`text-sm ${t==="site"?"text-orange-600":"text-purple-600"}`,children:t==="site"?"Ce mot de passe permet aux visiteurs d'accéder à l'annuaire d'agents. Partagez-le uniquement avec les utilisateurs autorisés.":"Ce mot de passe donne accès au panel d'administration. Gardez-le strictement confidentiel et utilisez un mot de passe fort."}),e.jsx("div",{className:`mt-3 text-xs font-medium ${t==="site"?"text-orange-500":"text-purple-500"}`,children:"💾 Sauvegarde automatique dans Supabase + localStorage"})]})]})})]})]})})]})})},Lt=({currentView:r,onViewChange:s})=>{const[t,o]=h.useState(!1),[a,n]=h.useState(!1),[l,g]=h.useState(!1),[u,m]=h.useState("site-password"),[c,N]=h.useState(!1),{hasAccessToSite:w,mode:y,logout:b,switchToVisitor:d}=$(),p=()=>{y==="admin"?r==="admin"?(d(),s("agents")):s("admin"):(m("admin"),n(!0))},j=()=>{m("site-password"),n(!0)},v=()=>{w&&b(),s("agents"),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"header-modern",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx(i.div,{className:"flex items-center cursor-pointer group",onClick:v,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(i.h1,{className:"text-2xl font-bold text-gradient animate-shimmer relative",whileHover:{scale:1.1,textShadow:"0 0 20px rgba(255, 107, 53, 0.5)"},transition:{duration:.3},children:["OXO",e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-r from-orange-500/20 via-orange-400/30 to-orange-500/20 blur-lg -z-10",animate:{opacity:[.5,.8,.5],scale:[.8,1.2,.8]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[w&&e.jsxs(i.button,{onClick:()=>s("agents"),className:`nav-link-modern relative overflow-hidden ${r==="agents"?"active":""}`,whileHover:{scale:1.02,y:-2,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Base d'agents",e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-orange-500/10 opacity-0",whileHover:{opacity:1},transition:{duration:.3}})]}),w&&e.jsxs(i.button,{onClick:p,className:`nav-link-modern relative overflow-hidden ${r==="admin"?"active":""}`,whileHover:{scale:1.02,y:-2,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),y==="admin"?"Administration":"Mode Admin",e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-orange-500/10 opacity-0",whileHover:{opacity:1},transition:{duration:.3}})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[w?e.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Utilisateur connecté"}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:y==="admin"?"Administrateur":"Utilisateur"})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs(i.div,{className:"w-8 h-8 bg-gradient-primary rounded-full flex items-center justify-center cursor-pointer relative overflow-hidden ring-2 ring-transparent transition-all duration-300",whileHover:{scale:1.1,boxShadow:"0 8px 25px rgba(249, 115, 22, 0.3)",ring:"2px solid #f97316"},children:[e.jsx(H,{className:"w-4 h-4 text-white relative z-10"}),e.jsx(i.div,{className:"absolute inset-0 bg-white/20 rounded-full",animate:{scale:[1,1.2,1],opacity:[.3,0,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs(i.div,{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",initial:{y:-10,opacity:0},whileInView:{y:0,opacity:1},style:{boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)"},children:[e.jsxs("div",{className:"p-3 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Utilisateur connecté"}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:y})]}),y==="admin"&&e.jsxs(i.button,{onClick:()=>g(!0),className:"w-full flex items-center space-x-2 px-3 py-2 text-left text-sm hover:bg-orange-50 transition-all duration-300 text-orange-600 rounded-lg mx-1",whileHover:{x:4,backgroundColor:"#fed7aa"},whileTap:{scale:.98},children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:"Changer de mot de passe"})]}),e.jsxs(i.button,{onClick:b,className:"w-full flex items-center space-x-2 px-3 py-2 text-left text-sm hover:bg-red-50 transition-all duration-300 text-red-600 rounded-lg mx-1",whileHover:{x:4,backgroundColor:"#fee2e2"},whileTap:{scale:.98},children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:"Déconnexion"})]})]})]})]}):e.jsxs(i.button,{onClick:j,disabled:c,className:"btn-primary relative overflow-hidden group",whileHover:c?{}:{scale:1.05,boxShadow:"0 10px 30px rgba(249, 115, 22, 0.4)"},whileTap:c?{}:{scale:.95,boxShadow:"0 5px 15px rgba(249, 115, 22, 0.6)"},animate:c?{scale:[1,1.1,1.05],boxShadow:["0 5px 15px rgba(249, 115, 22, 0.3)","0 15px 40px rgba(249, 115, 22, 0.8)","0 20px 60px rgba(249, 115, 22, 0.6)"]}:{},transition:{type:"spring",stiffness:300,damping:15},children:[c&&e.jsx(i.div,{className:"absolute inset-0",children:[...Array(20)].map((S,x)=>e.jsx(i.div,{className:"absolute w-2 h-2 bg-white rounded-full",style:{left:"50%",top:"50%"},animate:{x:Math.cos(x*18*Math.PI/180)*(60+Math.random()*40),y:Math.sin(x*18*Math.PI/180)*(60+Math.random()*40),opacity:[1,0],scale:[0,1.5,0]},transition:{duration:1.2,ease:"easeOut",delay:x*.05}},x))}),e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12",initial:{x:"-100%"},animate:c?{x:["−100%","200%","−100%"]}:{},whileHover:c?{}:{x:"200%"},transition:c?{duration:1.5,repeat:1,ease:"easeInOut"}:{duration:.8,ease:"easeInOut"}}),e.jsx(i.div,{className:"absolute inset-0 bg-orange-400/20 rounded-lg",animate:c?{scale:[1,1.2,1.1],opacity:[.5,1,.8],backgroundColor:["rgba(251, 146, 60, 0.2)","rgba(249, 115, 22, 0.8)","rgba(234, 88, 12, 0.6)"]}:{scale:[1,1.05,1],opacity:[.5,.8,.5]},transition:c?{duration:1.5,ease:"easeInOut"}:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsx(i.div,{className:"absolute inset-0",children:[...Array(6)].map((S,x)=>e.jsx(i.div,{className:"absolute w-1 h-1 bg-white/60 rounded-full",style:{left:`${20+x*10}%`,top:`${30+x%2*40}%`},animate:c?{y:[-5,-25,-5],opacity:[0,1,0],scale:[.5,2,.5],rotate:[0,360,720]}:{y:[-5,-15,-5],opacity:[0,1,0],scale:[.5,1,.5]},transition:c?{duration:1.5,ease:"easeInOut",delay:x*.1}:{duration:2+x*.2,repeat:1/0,delay:x*.3,ease:"easeInOut"}},x))}),e.jsxs("div",{className:"relative z-10 flex items-center",children:[e.jsx(i.div,{whileHover:c?{}:{rotate:360},animate:c?{opacity:0,scale:0}:{opacity:1,scale:1},transition:{duration:c?.3:.6,ease:"easeInOut"},children:e.jsx(H,{className:"w-4 h-4 mr-2"})}),e.jsx(i.span,{whileHover:c?{}:{x:2},transition:{type:"spring",stiffness:300},children:c?"Décollage...":"Accéder au site"})]})]}),e.jsx("button",{onClick:()=>o(!t),className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t?e.jsx(q,{className:"w-5 h-5"}):e.jsx(Xe,{className:"w-5 h-5"})})]})]}),t&&e.jsx(i.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-gray-200 py-4",children:e.jsxs("div",{className:"space-y-2",children:[w&&e.jsxs("button",{onClick:()=>{s("agents"),o(!1)},className:`w-full nav-link-modern justify-start ${r==="agents"?"active":""}`,children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Base d'agents"]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{p(),o(!1)},className:`w-full nav-link-modern justify-start ${r==="admin"?"active":""}`,children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),y==="admin"?"Administration":"Mode Admin"]}),e.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-200",children:[e.jsxs("div",{className:"px-3 py-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Utilisateur connecté"}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:y})]}),y==="admin"&&e.jsxs("button",{onClick:()=>{g(!0),o(!1)},className:"w-full nav-link-modern justify-start text-orange-600",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Changer de mot de passe"]}),e.jsxs("button",{onClick:()=>{b(),o(!1)},className:"w-full nav-link-modern justify-start text-red-600",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Déconnexion"]})]})]}),!w&&e.jsxs(i.button,{onClick:()=>{j(),o(!1)},className:"w-full btn-primary justify-center relative overflow-hidden",whileTap:{scale:.95,boxShadow:"0 5px 15px rgba(249, 115, 22, 0.6)"},transition:{type:"spring",stiffness:300,damping:15},children:[e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12",animate:{x:["-100%","200%"]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),e.jsxs("div",{className:"relative z-10 flex items-center justify-center",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Accéder au site"]})]})]})})]})}),e.jsx(Mt,{isOpen:a,onClose:()=>{n(!1),N(!1)},mode:u,onSuccess:()=>{n(!1),N(!1),u==="admin"&&s("admin")}}),e.jsx(Pt,{isOpen:l,onClose:()=>g(!1)})]})};console.log("🚀 Nouveau Agent Service - SYSTÈME PROPRE !");class Ot{constructor(){W(this,"storageKey","oxo-agents-new")}getAll(){try{const s=localStorage.getItem(this.storageKey),t=s?JSON.parse(s):[];return console.log("📋 Agents récupérés:",t.length),t}catch(s){return console.error("❌ Erreur récupération:",s),[]}}saveAll(s){try{return localStorage.setItem(this.storageKey,JSON.stringify(s)),console.log("💾 Agents sauvegardés:",s.length),!0}catch(t){return console.error("❌ Erreur sauvegarde:",t),!1}}create(s){try{const t={...s,id:Date.now().toString(),created:new Date().toISOString()},o=this.getAll();return o.push(t),this.saveAll(o)?(console.log("✅ Agent créé:",t.name),t):null}catch(t){return console.error("❌ Erreur création:",t),null}}update(s,t){try{const o=this.getAll(),a=o.findIndex(n=>n.id===s);return a===-1?(console.error("❌ Agent non trouvé:",s),null):(o[a]={...o[a],...t},this.saveAll(o)?(console.log("✅ Agent modifié:",o[a].name),o[a]):null)}catch(o){return console.error("❌ Erreur modification:",o),null}}delete(s){try{const t=this.getAll(),o=t.length,a=t.filter(n=>n.id!==s);if(a.length<o){if(this.saveAll(a))return console.log("✅ Agent supprimé:",s),!0}else console.error("❌ Agent non trouvé:",s);return!1}catch(t){return console.error("❌ Erreur suppression:",t),!1}}getById(s){try{return this.getAll().find(o=>o.id===s)||null}catch(t){return console.error("❌ Erreur récupération agent:",t),null}}clear(){try{return localStorage.removeItem(this.storageKey),console.log("🧹 Tous les agents supprimés"),!0}catch(s){return console.error("❌ Erreur nettoyage:",s),!1}}}const T=new Ot,_t=ne((r,s)=>({agents:[],isLoading:!1,error:null,loadAgents:()=>{console.log("📋 Chargement agents...");try{r({isLoading:!0,error:null});const t=T.getAll();r({agents:t,isLoading:!1}),console.log("✅ Agents chargés:",t.length)}catch(t){console.error("❌ Erreur chargement:",t),r({error:"Erreur de chargement",isLoading:!1})}},addAgent:t=>{console.log("➕ Ajout agent:",t.name);try{if(r({isLoading:!0,error:null}),T.create(t)){const a=T.getAll();return r({agents:a,isLoading:!1}),console.log("✅ Agent ajouté avec succès"),!0}else return r({error:"Erreur lors de l'ajout",isLoading:!1}),!1}catch(o){return console.error("❌ Erreur ajout:",o),r({error:"Erreur lors de l'ajout",isLoading:!1}),!1}},updateAgent:(t,o)=>{console.log("✏️ Modification agent:",t);try{if(r({isLoading:!0,error:null}),T.update(t,o)){const n=T.getAll();return r({agents:n,isLoading:!1}),console.log("✅ Agent modifié avec succès"),!0}else return r({error:"Erreur lors de la modification",isLoading:!1}),!1}catch(a){return console.error("❌ Erreur modification:",a),r({error:"Erreur lors de la modification",isLoading:!1}),!1}},deleteAgent:t=>{console.log("🗑️ Suppression agent:",t);try{if(r({isLoading:!0,error:null}),T.delete(t)){const a=T.getAll();return r({agents:a,isLoading:!1}),console.log("✅ Agent supprimé avec succès"),!0}else return r({error:"Erreur lors de la suppression",isLoading:!1}),!1}catch(o){return console.error("❌ Erreur suppression:",o),r({error:"Erreur lors de la suppression",isLoading:!1}),!1}},clearError:()=>{r({error:null})},clearAll:()=>{console.log("🧹 Nettoyage complet...");try{return T.clear()?(r({agents:[],error:null}),console.log("✅ Nettoyage terminé"),!0):!1}catch(t){return console.error("❌ Erreur nettoyage:",t),!1}}})),Tt=()=>{const{agents:r,isLoading:s,error:t,loadAgents:o,addAgent:a,updateAgent:n,deleteAgent:l,clearError:g}=_t(),[u,m]=h.useState(!1),[c,N]=h.useState(null),[w,y]=h.useState(""),[b,d]=h.useState("all"),[p,j]=h.useState({});h.useEffect(()=>{o()},[o]);const v=r.filter(f=>{const k=f.name.toLowerCase().includes(w.toLowerCase())||f.identifier.toLowerCase().includes(w.toLowerCase()),L=b==="all"||f.platform===b;return k&&L}),S=()=>{const[f,k]=h.useState({name:(c==null?void 0:c.name)||"",identifier:(c==null?void 0:c.identifier)||"",phoneNumber:(c==null?void 0:c.phoneNumber)||"",email:(c==null?void 0:c.email)||"",websiteUrl:(c==null?void 0:c.websiteUrl)||"",platform:(c==null?void 0:c.platform)||"whatsapp",category:(c==null?void 0:c.category)||"business",about:(c==null?void 0:c.about)||"",notes:(c==null?void 0:c.notes)||""}),L=M=>{if(M.preventDefault(),!f.name||!f.identifier){alert("Nom et identifiant requis !");return}let Z=!1;c?Z=n(c.id,f):Z=a(f),Z&&(m(!1),N(null))};return e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-2xl shadow-xl p-8 mb-8 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:c?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-6 h-6 text-orange-500"}),"Modifier l'agent"]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-6 h-6 text-blue-500"}),"Nouvel agent"]})}),e.jsx("button",{onClick:()=>{m(!1),N(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet *"}),e.jsx("input",{type:"text",value:f.name,onChange:M=>k({...f,name:M.target.value}),className:"w-full h-12 px-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-300 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300",placeholder:"Ex: Jean Dupont",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Identifiant unique *"}),e.jsx("input",{type:"text",value:f.identifier,onChange:M=>k({...f,identifier:M.target.value}),className:"w-full h-12 px-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-300 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300",placeholder:"Ex: @jeandupont ou +33123456789",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Téléphone"}),e.jsx("input",{type:"text",value:f.phoneNumber,onChange:M=>k({...f,phoneNumber:M.target.value}),className:"w-full h-12 px-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-300 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300",placeholder:"+33 1 23 45 67 89"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:f.email,onChange:M=>k({...f,email:M.target.value}),className:"w-full h-12 px-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-300 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300",placeholder:"jean@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Site web"}),e.jsx("input",{type:"url",value:f.websiteUrl,onChange:M=>k({...f,websiteUrl:M.target.value}),className:"w-full h-12 px-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-300 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300",placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Plateforme"}),e.jsxs("select",{value:f.platform,onChange:M=>k({...f,platform:M.target.value}),className:"w-full h-12 px-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-300 focus:border-blue-500 bg-white text-gray-900 transition-all duration-300",children:[e.jsx("option",{value:"whatsapp",children:"WhatsApp"}),e.jsx("option",{value:"telegram",children:"Telegram"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"phone",children:"Téléphone"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"instagram",children:"Instagram"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"À propos"}),e.jsx("textarea",{value:f.about,onChange:M=>k({...f,about:M.target.value}),className:"w-full h-24 px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-300 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300 resize-none",placeholder:"Description de l'agent, ses spécialités..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes internes"}),e.jsx("textarea",{value:f.notes,onChange:M=>k({...f,notes:M.target.value}),className:"w-full h-24 px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-300 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300 resize-none",placeholder:"Notes privées visibles uniquement par les admins..."})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs(i.button,{type:"submit",className:"flex-1 h-12 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 font-semibold flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[c?e.jsx(Q,{className:"w-4 h-4"}):e.jsx(X,{className:"w-4 h-4"}),c?"Modifier l'agent":"Créer l'agent"]}),e.jsx(i.button,{type:"button",onClick:()=>{m(!1),N(null)},className:"px-6 h-12 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-300 font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Annuler"})]})]})]})},x=f=>{confirm(`Êtes-vous sûr de vouloir supprimer ${f.name} ?`)&&l(f.id)},A=f=>{j(k=>({...k,[f]:!k[f]}))},C=f=>{switch(f){case"whatsapp":return"💬";case"telegram":return"✈️";case"email":return"📧";case"phone":return"📞";case"linkedin":return"💼";case"instagram":return"📸";default:return"🌐"}},O=f=>{switch(f){case"whatsapp":return"bg-green-100 text-green-800 border-green-200";case"telegram":return"bg-blue-100 text-blue-800 border-blue-200";case"email":return"bg-purple-100 text-purple-800 border-purple-200";case"phone":return"bg-orange-100 text-orange-800 border-orange-200";case"linkedin":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"instagram":return"bg-pink-100 text-pink-800 border-pink-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"🎯 Agents Disponibles"}),e.jsxs("div",{className:"flex justify-center gap-8 text-lg",children:[e.jsxs("div",{className:"text-blue-600",children:[e.jsx("span",{className:"font-bold",children:r.length})," agents total"]}),e.jsxs("div",{className:"text-green-600",children:[e.jsx("span",{className:"font-bold",children:v.length})," affichés"]})]})]}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ge,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher un agent...",value:w,onChange:f=>y(f.target.value),className:"w-full h-12 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-300 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsxs("select",{value:b,onChange:f=>d(f.target.value),className:"h-12 pl-12 pr-8 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-300 focus:border-blue-500 bg-white text-gray-900 transition-all duration-300",children:[e.jsx("option",{value:"all",children:"Toutes les plateformes"}),e.jsx("option",{value:"whatsapp",children:"WhatsApp"}),e.jsx("option",{value:"telegram",children:"Telegram"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"phone",children:"Téléphone"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"instagram",children:"Instagram"})]})]}),e.jsxs(i.button,{onClick:()=>m(!0),className:"h-12 px-6 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 font-semibold flex items-center gap-2 whitespace-nowrap",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(X,{className:"w-4 h-4"}),"Nouvel agent"]})]})}),e.jsx(U,{children:t&&e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-red-700 font-medium",children:t})]}),e.jsx("button",{onClick:g,className:"text-red-400 hover:text-red-600 transition-colors",children:"✕"})]})}),s&&e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:e.jsxs("div",{className:"inline-flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-600 font-medium",children:"Chargement des agents..."})]})}),e.jsx(U,{children:u&&e.jsx(S,{})}),e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid gap-6",children:e.jsx(U,{children:v.map((f,k)=>e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:k*.05},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg",children:f.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:f.name}),e.jsxs("p",{className:"text-gray-600",children:["@",f.identifier]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 text-sm",children:[f.phoneNumber&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{children:f.phoneNumber})]}),f.email&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:f.email})]}),f.websiteUrl&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{children:"Site web"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border flex items-center gap-1 ${O(f.platform)}`,children:[e.jsx("span",{children:C(f.platform)}),f.platform]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-800 border border-gray-200",children:f.category})]}),f.about&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:`text-gray-700 ${p[f.id]?"":"line-clamp-2"}`,children:f.about}),f.about.length>100&&e.jsx("button",{onClick:()=>A(f.id),className:"text-blue-500 hover:text-blue-600 text-sm mt-1 flex items-center gap-1",children:p[f.id]?e.jsxs(e.Fragment,{children:["Voir moins ",e.jsx(Fe,{className:"w-3 h-3"})]}):e.jsxs(e.Fragment,{children:["Voir plus ",e.jsx(He,{className:"w-3 h-3"})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(De,{className:"w-3 h-3"}),"Ajouté le ",new Date(f.created).toLocaleDateString("fr-FR")]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(i.button,{onClick:()=>{N(f),m(!0)},className:"w-10 h-10 bg-orange-100 text-orange-600 rounded-xl hover:bg-orange-200 transition-colors flex items-center justify-center",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Modifier",children:e.jsx(Q,{className:"w-4 h-4"})}),e.jsx(i.button,{onClick:()=>x(f),className:"w-10 h-10 bg-red-100 text-red-600 rounded-xl hover:bg-red-200 transition-colors flex items-center justify-center",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Supprimer",children:e.jsx(Ye,{className:"w-4 h-4"})})]})]})},f.id))})}),v.length===0&&!s&&e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(H,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:w||b!=="all"?"Aucun agent trouvé":"Aucun agent"}),e.jsx("p",{className:"text-gray-600 mb-6",children:w||b!=="all"?"Essayez de modifier vos critères de recherche":"Commencez par ajouter votre premier agent"}),!w&&b==="all"&&e.jsxs(i.button,{onClick:()=>m(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 font-semibold flex items-center gap-2 mx-auto",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(X,{className:"w-4 h-4"}),"Ajouter mon premier agent"]})]})]})},zt=({isOpen:r,onClose:s})=>{const[t,o]=h.useState("site"),[a,n]=h.useState(""),[l,g]=h.useState(""),[u,m]=h.useState(""),[c,N]=h.useState(!1),[w,y]=h.useState(!1),[b,d]=h.useState(null),{changeSitePassword:p,changeAdminPassword:j}=$(),v=async S=>{if(S.preventDefault(),y(!0),d(null),!a||!l||!u){d({type:"error",text:"Veuillez remplir tous les champs"}),y(!1);return}if(l!==u){d({type:"error",text:"Les nouveaux mots de passe ne correspondent pas"}),y(!1);return}if(l.length<6){d({type:"error",text:"Le mot de passe doit contenir au moins 6 caractères"}),y(!1);return}try{const x=E.getSitePassword(),A=E.getAdminPassword();if(t==="site"&&a!==x){d({type:"error",text:"Mot de passe actuel incorrect"}),y(!1);return}if(t==="admin"&&a!==A){d({type:"error",text:"Mot de passe actuel incorrect"}),y(!1);return}let C=!1;t==="site"?C=await p(a,l):C=await j(a,l),C?(d({type:"success",text:`Mot de passe ${t} mis à jour avec succès`}),n(""),g(""),m(""),setTimeout(()=>{s()},2e3)):d({type:"error",text:"Erreur lors de la mise à jour"})}catch(x){console.error("Erreur changement mot de passe:",x),d({type:"error",text:"Une erreur est survenue"})}y(!1)};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx(i.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"🔐 Gestion des mots de passe"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(q,{className:"w-5 h-5"})})]}),b&&e.jsxs(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`mb-4 p-4 rounded-xl flex items-center space-x-3 ${b.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[b.type==="success"?e.jsx(K,{className:"w-5 h-5 text-green-500"}):e.jsx(J,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:`text-sm ${b.type==="success"?"text-green-700":"text-red-700"}`,children:b.text})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Type de mot de passe"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>o("site"),className:`p-3 rounded-xl font-medium transition-colors ${t==="site"?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Site"}),e.jsx("button",{type:"button",onClick:()=>o("admin"),className:`p-3 rounded-xl font-medium transition-colors ${t==="admin"?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Admin"})]})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe actuel"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:c?"text":"password",value:a,onChange:S=>n(S.target.value),className:"w-full h-10 pl-10 pr-10 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",placeholder:"Mot de passe actuel",required:!0}),e.jsx("button",{type:"button",onClick:()=>N(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:c?e.jsx(D,{className:"w-4 h-4"}):e.jsx(F,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nouveau mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:c?"text":"password",value:l,onChange:S=>g(S.target.value),className:"w-full h-10 pl-10 pr-4 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",placeholder:"Nouveau mot de passe",required:!0,minLength:6})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le nouveau mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:c?"text":"password",value:u,onChange:S=>m(S.target.value),className:"w-full h-10 pl-10 pr-4 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",placeholder:"Confirmer le mot de passe",required:!0,minLength:6})]})]}),e.jsx(i.button,{type:"submit",disabled:w,className:"w-full h-12 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 font-semibold disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:w?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Mise à jour..."})]}):`🔐 Mettre à jour le mot de passe ${t}`})]})]})})}):null},$t=()=>{const[r,s]=h.useState(""),[t,o]=h.useState(""),[a,n]=h.useState(!1),[l,g]=h.useState(""),[u,m]=h.useState("success"),[c,N]=h.useState(""),[w,y]=h.useState(""),[b,d]=h.useState(!1),[p,j]=h.useState(!1),{updateSitePassword:v,updateAdminPassword:S,getSitePassword:x,getAdminPassword:A}=$();h.useEffect(()=>{(async()=>{try{const L=await x(),M=await A();N(L),y(M)}catch(L){console.error("Erreur chargement mots de passe:",L)}})()},[x,A]);const C=(k,L="success")=>{g(k),m(L),setTimeout(()=>g(""),5e3)},O=async()=>{if(r.length<6){C("Le mot de passe du site doit contenir au moins 6 caractères","error");return}if(d(!0),await v(r)){C("✅ Mot de passe du site mis à jour avec succès dans Supabase !"),s("");const L=await x();N(L)}else C("❌ Erreur lors de la mise à jour du mot de passe du site","error");d(!1)},f=async()=>{if(t.length<6){C("Le mot de passe admin doit contenir au moins 6 caractères","error");return}if(d(!0),await S(t)){C("✅ Mot de passe admin mis à jour avec succès dans Supabase !"),o("");const L=await A();y(L)}else C("❌ Erreur lors de la mise à jour du mot de passe admin","error");d(!1)};return e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-6",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl mb-6 shadow-2xl",children:e.jsx(Ke,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Administration"}),e.jsx("p",{className:"text-xl text-gray-300",children:"Gestion des mots de passe système"})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"text-center mb-8",children:[e.jsxs(i.button,{onClick:()=>j(!0),className:"inline-flex items-center space-x-3 px-8 py-4 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-semibold rounded-2xl shadow-lg transition-all duration-300",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:[e.jsx(qe,{className:"w-6 h-6"}),e.jsx("span",{children:"Gestionnaire Avancé de Mots de Passe"}),e.jsx(_,{className:"w-5 h-5"})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-3",children:"🔐 Interface complète avec historique, sécurité et validation avancée"})]}),l&&e.jsx(i.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`mb-8 p-6 rounded-2xl border-2 ${u==="success"?"bg-green-500/10 text-green-400 border-green-500/30":"bg-red-500/10 text-red-400 border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[u==="success"?e.jsx(K,{className:"w-6 h-6 flex-shrink-0"}):e.jsx(J,{className:"w-6 h-6 flex-shrink-0"}),e.jsx("span",{className:"text-lg font-medium",children:l})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(i.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-white/5 backdrop-blur-xl rounded-3xl p-8 border border-white/10 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center border border-blue-500/30",children:e.jsx(We,{className:"w-8 h-8 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Mot de passe du site"}),e.jsx("p",{className:"text-gray-400",children:"Accès pour les utilisateurs"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-3 text-gray-300",children:"Mot de passe actuel"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a?"text":"password",value:c,readOnly:!0,className:"w-full h-14 px-6 pr-14 bg-white/5 border-2 border-white/10 rounded-2xl text-white placeholder-gray-500 font-medium focus:border-blue-500/50 focus:outline-none cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:a?e.jsx(D,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-3 text-gray-300",children:"Nouveau mot de passe"}),e.jsx("input",{type:"password",value:r,onChange:k=>s(k.target.value),className:"w-full h-14 px-6 bg-white/5 border-2 border-white/10 rounded-2xl text-white placeholder-gray-500 font-medium focus:border-blue-500/50 focus:outline-none transition-all duration-300",placeholder:"Nouveau mot de passe (min. 6 caractères)"})]}),e.jsx(i.button,{onClick:O,disabled:!r||r.length<6||b,className:"w-full h-14 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-bold rounded-2xl transition-all duration-300 flex items-center justify-center space-x-3 shadow-xl",whileHover:{scale:r&&r.length>=6&&!b?1.02:1},whileTap:{scale:r&&r.length>=6&&!b?.98:1},children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loading-spinner w-5 h-5"}),e.jsx("span",{children:"Mise à jour..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{children:"Mettre à jour"})]})})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:e.jsx("p",{className:"text-sm text-blue-300",children:"💡 Ce mot de passe permet aux visiteurs d'accéder à l'annuaire d'agents."})})]}),e.jsxs(i.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white/5 backdrop-blur-xl rounded-3xl p-8 border border-white/10 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-2xl flex items-center justify-center border border-red-500/30",children:e.jsx(_,{className:"w-8 h-8 text-red-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Mot de passe admin"}),e.jsx("p",{className:"text-gray-400",children:"Accès administration"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-3 text-gray-300",children:"Mot de passe actuel"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:a?"text":"password",value:w,readOnly:!0,className:"w-full h-14 px-6 pr-14 bg-white/5 border-2 border-white/10 rounded-2xl text-white placeholder-gray-500 font-medium focus:border-red-500/50 focus:outline-none cursor-not-allowed"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-3 text-gray-300",children:"Nouveau mot de passe"}),e.jsx("input",{type:"password",value:t,onChange:k=>o(k.target.value),className:"w-full h-14 px-6 bg-white/5 border-2 border-white/10 rounded-2xl text-white placeholder-gray-500 font-medium focus:border-red-500/50 focus:outline-none transition-all duration-300",placeholder:"Nouveau mot de passe (min. 6 caractères)"})]}),e.jsx(i.button,{onClick:f,disabled:!t||t.length<6||b,className:"w-full h-14 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-bold rounded-2xl transition-all duration-300 flex items-center justify-center space-x-3 shadow-xl",whileHover:{scale:t&&t.length>=6&&!b?1.02:1},whileTap:{scale:t&&t.length>=6&&!b?.98:1},children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loading-spinner w-5 h-5"}),e.jsx("span",{children:"Mise à jour..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{children:"Mettre à jour"})]})})]}),e.jsx("div",{className:"mt-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-300",children:"⚠️ Ce mot de passe donne accès aux fonctionnalités d'administration. Gardez-le confidentiel."})})]})]}),e.jsxs(i.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-12 bg-yellow-500/10 backdrop-blur-xl rounded-3xl p-8 border border-yellow-500/20",children:[e.jsxs("h3",{className:"text-2xl font-bold text-yellow-400 mb-6 flex items-center",children:[e.jsx(P,{className:"w-6 h-6 mr-3"}),"Conseils de sécurité"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-yellow-200",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"🔐 Bonnes pratiques :"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• Utilisez des mots de passe complexes (8+ caractères)"}),e.jsx("li",{children:"• Changez les mots de passe régulièrement"}),e.jsx("li",{children:"• Ne partagez jamais le mot de passe admin"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"💾 Sauvegarde :"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• Les mots de passe sont sauvegardés dans Supabase"}),e.jsx("li",{children:"• Backup automatique en localStorage"}),e.jsx("li",{children:"• Historique des changements enregistré"})]})]})]})]})]}),e.jsx(zt,{isOpen:p,onClose:()=>j(!1)})]})};class Rt{async getAll(){try{console.log("🔄 Récupération de tous les agents...");const s=await E.getAll();return console.log("✅",s.data.length,"agents récupérés"),s}catch(s){return console.error("💥 Exception récupération:",s),{data:[],error:s}}}async create(s){try{console.log("➕ Création agent..."),console.log("📤 Données envoyées:",s);const t=await E.create(s);return t.error?(console.error("❌ Erreur création:",t.error),{data:[],error:t.error}):(console.log("✅ Agent créé avec succès"),t)}catch(t){return console.error("💥 Exception création:",t),{data:[],error:t}}}async update(s,t){try{console.log("✏️ Modification agent:",s);const o=await E.update(s,t);return o.error?(console.error("❌ Erreur modification:",o.error),{data:[],error:o.error}):(console.log("✅ Agent modifié avec succès"),o)}catch(o){return console.error("💥 Exception modification:",o),{data:[],error:o}}}async delete(s){try{console.log("🗑️ Suppression agent:",s);const t=await E.delete(s);if(t.error)throw console.error("❌ Erreur suppression:",t.error),new Error("Échec de suppression");return console.log("✅ Agent supprimé avec succès"),t}catch(t){throw console.error("💥 Exception suppression:",t),new Error("Échec de suppression")}}async getById(s){try{return console.log("👁️ Récupération agent:",s),await E.getOne(s)}catch(t){return console.error("💥 Exception récupération agent:",t),{data:null,error:t}}}}const Ut=new Rt,pe=r=>({id:r.id,name:r.name||"",identifier:r.identifier||"",phoneNumber:r.phone_number,platform:r.platform||"whatsapp",category:r.category||"other",categories:r.categories||[],status:r.status||"active",rating:r.rating||0,totalSales:0,lastActivity:new Date(r.updated_at||r.created_at),notes:"",about:r.description,adminNotes:"",isVerified:!!r.verification_date,avatar:void 0,languages:r.languages||[],specialties:r.specialties||[],contactInfo:{platform:r.platform||"whatsapp",identifier:r.identifier||"",phoneNumber:r.phone_number,email:r.email,websiteUrl:r.website_url},stats:{totalContacts:0,responseRate:0,avgResponseTime:0,successfulDeals:0,customerRating:r.rating||0}}),Ie=ne()(Ae((r,s)=>({agents:[],filteredAgents:[],filters:{},isLoading:!1,error:null,loadAgents:async()=>{r({isLoading:!0,error:null});try{let t=[];if(isSupabaseConfigured){console.log("🔄 Chargement des agents depuis Supabase..."),t=(await Ut.getAll()).map(pe),console.log(`✅ ${t.length} agents chargés depuis Supabase`);const a=localStorage.getItem("oxo-agent-notes");if(a){const n=JSON.parse(a);t=t.map(l=>{var g,u;return{...l,notes:((g=n[l.id])==null?void 0:g.notes)||"",adminNotes:((u=n[l.id])==null?void 0:u.adminNotes)||""}}),console.log("📝 Notes locales fusionnées")}localStorage.setItem("oxo-agents",JSON.stringify(t))}else{console.log("⚠️ Supabase non configuré, utilisation de localStorage");const o=localStorage.getItem("oxo-agents");t=o?JSON.parse(o):[],console.log(`📱 ${t.length} agents chargés depuis localStorage`)}r({agents:t,filteredAgents:t,isLoading:!1}),s().applyFilters()}catch(t){console.error("❌ Erreur chargement agents:",t);try{const o=localStorage.getItem("oxo-agents"),a=o?JSON.parse(o):[];console.log(`🔄 Fallback: ${a.length} agents depuis localStorage`),r({agents:a,filteredAgents:a,error:null,isLoading:!1})}catch(o){console.error("❌ Erreur fallback localStorage:",o),r({agents:[],filteredAgents:[],error:"Erreur lors du chargement des agents",isLoading:!1})}}},addAgent:async t=>{var o,a,n,l;r({isLoading:!0,error:null});try{console.log("➕ Création agent directe..."),console.log("📦 Agent data:",t);const g={name:t.name,identifier:t.identifier,phone_number:t.phoneNumber,email:(o=t.contactInfo)==null?void 0:o.email,website_url:(a=t.contactInfo)==null?void 0:a.websiteUrl,platform:t.platform,category:t.category,description:t.about||"",internal_notes:t.notes||""};console.log("📤 Create data préparé:",g);const u=await E.create(g);if(console.log("📥 Résultat création:",u),u.error)throw console.error("❌ Erreur création:",u.error),new Error("Échec de création: "+u.error);const m=u.data[0],c={id:m.id,name:m.name,identifier:m.identifier,phoneNumber:m.phone_number,platform:t.platform,platforms:t.platforms||[],status:"active",rating:0,totalSales:0,lastActivity:new Date,about:t.about||"",adminNotes:t.adminNotes||"",isVerified:!0,languages:t.languages||[],specialties:t.specialties||[],contactInfo:{platform:t.platform,identifier:t.identifier,phoneNumber:t.phoneNumber,email:(n=t.contactInfo)==null?void 0:n.email,websiteUrl:(l=t.contactInfo)==null?void 0:l.websiteUrl},stats:{totalContacts:0,responseRate:0,avgResponseTime:0,successfulDeals:0,customerRating:0}},w=[...s().agents,c];return r({agents:w,filteredAgents:w,isLoading:!1,error:null}),s().applyFilters(),console.log("✅ Agent ajouté avec succès:",c.name),!0}catch(g){return console.error("❌ Erreur ajout agent:",g),r({error:"Erreur lors de l'ajout de l'agent",isLoading:!1}),!1}},updateAgent:async t=>{var o,a;r({isLoading:!0,error:null});try{console.log("🔄 Mise à jour agent directe..."),console.log("📦 Agent data:",t);const n={name:t.name,identifier:t.identifier,phone_number:t.phoneNumber,email:(o=t.contactInfo)==null?void 0:o.email,website_url:(a=t.contactInfo)==null?void 0:a.websiteUrl,platform:t.platform,category:t.category,description:t.about||"",internal_notes:t.notes||""};console.log("📤 Update data préparé:",n);const l=await E.update(t.id,n);if(console.log("📥 Résultat databaseService:",l),l.error)throw console.error("❌ Erreur databaseService:",l.error),new Error("Échec de mise à jour: "+l.error);const u=s().agents.map(m=>m.id===t.id?{...m,name:t.name,identifier:t.identifier,phoneNumber:t.phoneNumber,platform:t.platform,platforms:t.platforms||[],category:t.category,categories:t.categories||[],notes:t.notes,about:t.about,adminNotes:t.adminNotes,languages:t.languages||[],specialties:t.specialties||[],contactInfo:{...m.contactInfo,...t.contactInfo}}:m);return localStorage.setItem("oxo-agents",JSON.stringify(u)),r({agents:u,filteredAgents:u,isLoading:!1}),s().applyFilters(),!0}catch(n){return console.error("❌ Erreur mise à jour agent:",n),r({error:"Erreur lors de la mise à jour de l'agent",isLoading:!1}),!1}},deleteAgent:async t=>{r({isLoading:!0,error:null});try{console.log("🗑️ Suppression agent directe..."),console.log("🆔 ID à supprimer:",t);const o=await E.delete(t);if(console.log("📥 Résultat suppression:",o),o.error)throw console.error("❌ Erreur suppression:",o.error),new Error("Échec de suppression: "+o.error);const n=s().agents.filter(l=>l.id!==t);return r({agents:n,filteredAgents:n,isLoading:!1,error:null}),s().applyFilters(),console.log("✅ Agent supprimé avec succès:",t),!0}catch(o){return console.error("❌ Erreur suppression agent:",o),r({error:"Erreur lors de la suppression de l'agent",isLoading:!1}),!1}},setFilters:t=>{r(o=>({filters:{...o.filters,...t}})),s().applyFilters()},applyFilters:()=>{const{agents:t,filters:o}=s();let a=[...t];if(o.search){const n=o.search.toLowerCase();a=a.filter(l=>{var g;return l.name.toLowerCase().includes(n)||l.identifier.toLowerCase().includes(n)||((g=l.contactInfo.email)==null?void 0:g.toLowerCase().includes(n))||l.notes&&l.notes.toLowerCase().includes(n)||l.about&&l.about.toLowerCase().includes(n)||l.specialties.some(u=>u.toLowerCase().includes(n))||l.languages.some(u=>u.toLowerCase().includes(n))||l.contactInfo.websiteUrl&&l.contactInfo.websiteUrl.toLowerCase().includes(n)})}o.platform&&(a=a.filter(n=>n.platform===o.platform)),o.status&&(a=a.filter(n=>n.status===o.status)),o.isVerified!==void 0&&(a=a.filter(n=>n.isVerified===o.isVerified)),o.minRating!==void 0&&(a=a.filter(n=>n.rating>=o.minRating)),r({filteredAgents:a})},clearFilters:()=>{r({filters:{}}),s().applyFilters()},getAgentById:t=>s().agents.find(o=>o.id===t),getAgentsByPlatform:t=>s().agents.filter(o=>o.platform===t),searchAgents:t=>{s().setFilters({search:t})},setError:t=>r({error:t}),clearError:()=>r({error:null}),saveToStorage:()=>{const{agents:t}=s();localStorage.setItem("oxo-agents",JSON.stringify(t))},resetToDefaults:()=>{localStorage.removeItem("oxo-agents"),r({agents:[],filteredAgents:[],filters:{},error:null})},exportData:()=>{const{agents:t}=s();return JSON.stringify(t,null,2)},importData:t=>{try{const o=JSON.parse(t);return Array.isArray(o)?(localStorage.setItem("oxo-agents",JSON.stringify(o)),r({agents:o,filteredAgents:o,error:null}),!0):!1}catch{return!1}},syncWithSupabase:async()=>{if(!isSupabaseConfigured)return console.log("⚠️ Supabase non configuré, synchronisation impossible"),!1;r({isLoading:!0,error:null});try{console.log("🔄 Synchronisation avec Supabase...");const o=(await AgentsService.getAll()).map(pe),a=localStorage.getItem("oxo-agents"),n=a?JSON.parse(a):[],l=o.length>0?o:n;return localStorage.setItem("oxo-agents",JSON.stringify(l)),r({agents:l,filteredAgents:l,isLoading:!1,error:null}),s().applyFilters(),console.log(`✅ Synchronisation réussie: ${l.length} agents`),!0}catch(t){return console.error("❌ Erreur synchronisation:",t),r({error:"Erreur lors de la synchronisation",isLoading:!1}),!1}},getSupabaseStatus:()=>({configured:isSupabaseConfigured,connected:isSupabaseConfigured}),saveAgentNotes:(t,o,a)=>{try{const n=localStorage.getItem("oxo-agent-notes"),l=n?JSON.parse(n):{};l[t]={notes:o,adminNotes:a},localStorage.setItem("oxo-agent-notes",JSON.stringify(l));const u=s().agents.map(m=>m.id===t?{...m,notes:o,adminNotes:a}:m);r({agents:u,filteredAgents:u}),s().applyFilters(),console.log("📝 Notes sauvegardées localement pour agent:",t)}catch(n){console.error("❌ Erreur sauvegarde notes locales:",n)}}}),{name:"oxo-agent-storage",partialize:r=>({agents:r.agents,filters:r.filters})})),Ht=["Français","English","Español","Português","Italiano","Deutsch","中文","日本語","한국어","العربية","Русский","हिन्दी","Türkçe"],Ft=({isOpen:r,onClose:s,agent:t,onSave:o})=>{const[a,n]=h.useState({name:"",phoneNumber:"",notes:"",about:"",languages:[],email:"",websiteUrl:""}),[l,g]=h.useState(""),[u,m]=h.useState({}),{addAgent:c,updateAgent:N,isLoading:w,error:y}=Ie(),b=!!t;h.useEffect(()=>{var x,A;n(t?{name:t.name||"",phoneNumber:t.phoneNumber||"",notes:t.notes||"",about:t.about||"",languages:[...t.languages||[]],email:((x=t.contactInfo)==null?void 0:x.email)||"",websiteUrl:((A=t.contactInfo)==null?void 0:A.websiteUrl)||""}:{name:"",phoneNumber:"",notes:"",about:"",languages:[],email:"",websiteUrl:""}),m({})},[t,r]);const d=()=>{const x={};return a.phoneNumber&&!/^\+?[\d\s\-\(\)]+$/.test(a.phoneNumber)&&(x.phoneNumber="Format de numéro invalide"),a.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)&&(x.email="Format d'email invalide"),m(x),Object.keys(x).length===0},p=async x=>{if(x.preventDefault(),!!d())try{if(b&&t){const A={id:t.id,name:a.name||"Agent sans nom",identifier:a.name||"Agent sans nom",phoneNumber:a.phoneNumber||void 0,platform:"whatsapp",notes:a.notes||void 0,about:a.about||void 0,languages:a.languages,contactInfo:{email:a.email||void 0,websiteUrl:a.websiteUrl||void 0}};o?await o(A,!0)&&s():await N(A)&&s()}else{const A={name:a.name||"Agent sans nom",identifier:a.name||"Agent sans nom",phoneNumber:a.phoneNumber||void 0,platform:"whatsapp",notes:a.notes||void 0,about:a.about||void 0,languages:a.languages,contactInfo:{email:a.email||void 0,websiteUrl:a.websiteUrl||void 0}};o?await o(A,!1)&&s():await c(A)&&s()}}catch(A){console.error("Erreur lors de la sauvegarde:",A)}},j=(x,A)=>{n(C=>({...C,[x]:A})),u[x]&&m(C=>({...C,[x]:""}))},v=()=>{l&&!a.languages.includes(l)&&(n(x=>({...x,languages:[...x.languages,l]})),g(""))},S=x=>{n(A=>({...A,languages:A.languages.filter(C=>C!==x)}))};return e.jsx(U,{children:r&&e.jsx("div",{className:"modal-overlay",onClick:s,children:e.jsx(i.div,{className:"modal-content max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:x=>x.stopPropagation(),initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},children:e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-primary rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:b?"Modifier l'agent":"Nouvel agent"}),e.jsx("p",{className:"text-sm text-gray-600",children:b?"Modifiez les informations de l'agent":"Ajoutez un nouvel agent à la base de données"})]})]}),e.jsx("button",{type:"button",onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(q,{className:"w-5 h-5 text-gray-400"})})]}),y&&e.jsx("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:y})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(H,{className:"w-4 h-4 inline mr-1"}),"Nom complet"]}),e.jsx("input",{type:"text",value:a.name,onChange:x=>j("name",x.target.value),className:`input-modern ${u.name?"border-red-500":""}`,placeholder:"Ex: Sophie Martin (facultatif)"}),u.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:u.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Langues parlées"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("select",{value:l,onChange:x=>g(x.target.value),className:"input-modern flex-1",children:[e.jsx("option",{value:"",children:"Sélectionner une langue"}),Ht.filter(x=>!a.languages.includes(x)).map(x=>e.jsx("option",{value:x,children:x},x))]}),e.jsx("button",{type:"button",onClick:v,className:"btn-secondary",disabled:!l,children:"Ajouter"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.languages.map(x=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[x,e.jsx("button",{type:"button",onClick:()=>S(x),className:"ml-1 text-orange-600 hover:text-orange-800",children:e.jsx(q,{className:"w-3 h-3"})})]},x))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📄 À propos & Services"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:a.about,onChange:x=>j("about",x.target.value),className:"input-modern min-h-[120px] resize-y",rows:6,placeholder:`Décrivez en détail les services proposés par cet agent : produits vendus, spécialités, méthodes de travail, zones géographiques, types de clients, etc.

Exemple : 
- Spécialisé dans la mode féminine haut de gamme
- Dropshipping depuis la Chine avec délais rapides  
- Service clientèle 24h/7j en français et anglais
- Expertise en cosmétiques coréens authentiques...`}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"💡 Plus vous détaillez, plus la recherche sera précise"}),e.jsxs("span",{children:[a.about.length," caractères"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ve,{className:"w-4 h-4 inline mr-1"}),"Téléphone"]}),e.jsx("input",{type:"tel",value:a.phoneNumber,onChange:x=>j("phoneNumber",x.target.value),className:`input-modern ${u.phoneNumber?"border-red-500":""}`,placeholder:"+33 6 12 34 56 78 (facultatif)"}),u.phoneNumber&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:u.phoneNumber})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(be,{className:"w-4 h-4 inline mr-1"}),"Email"]}),e.jsx("input",{type:"email",value:a.email,onChange:x=>j("email",x.target.value),className:`input-modern ${u.email?"border-red-500":""}`,placeholder:"contact@exemple.com (facultatif)"}),u.email&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:u.email})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Be,{className:"w-4 h-4 inline mr-1"}),"Site web"]}),e.jsx("input",{type:"url",value:a.websiteUrl,onChange:x=>j("websiteUrl",x.target.value),className:"input-modern",placeholder:"https://monsite.com (facultatif)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🔒 Notes internes (privées)"}),e.jsx("textarea",{value:a.notes,onChange:x=>j("notes",x.target.value),className:"input-modern",rows:3,placeholder:"Notes privées visibles seulement par vous... (facultatif)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ces notes restent confidentielles et ne sont jamais synchronisées"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:s,className:"btn-secondary",disabled:w,children:"Annuler"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:w,children:w?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"loading-spinner w-4 h-4"}),e.jsx("span",{children:"Sauvegarde..."})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsx("span",{children:b?"Modifier":"Créer"})]})})]})]})})})})},Dt=()=>{const[r,s]=h.useState(""),[t,o]=h.useState(""),[a,n]=h.useState(!1),[l,g]=h.useState(!1),[u,m]=h.useState(""),[c,N]=h.useState(!1);h.useEffect(()=>{(async()=>{console.log("Mode local - pas de session à vérifier")})()},[]);const w=async y=>{if(y.preventDefault(),m(""),g(!0),!r||!t){m("Veuillez remplir tous les champs"),g(!1);return}if(r!==t){m("Les mots de passe ne correspondent pas"),g(!1);return}if(r.length<6){m("Le mot de passe doit contenir au moins 6 caractères"),g(!1);return}try{E.setSitePassword(r)?(N(!0),console.log("✅ Mot de passe mis à jour avec succès"),setTimeout(()=>{window.location.href="/"},3e3)):m("Erreur lors de la mise à jour du mot de passe")}catch(b){console.error("Erreur:",b),m("Une erreur est survenue")}g(!1)};return c?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs(i.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(K,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Mot de passe mis à jour !"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Votre mot de passe a été mis à jour avec succès. Vous allez être redirigé..."}),e.jsx("div",{className:"w-6 h-6 border-2 border-green-600 border-t-transparent rounded-full animate-spin mx-auto"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(P,{className:"w-8 h-8 text-orange-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Nouveau mot de passe"}),e.jsx("p",{className:"text-gray-600",children:"Choisissez un nouveau mot de passe sécurisé pour votre compte"})]}),u&&e.jsxs(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center space-x-3",children:[e.jsx(J,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-red-700 text-sm",children:u})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Nouveau mot de passe"}),e.jsxs("div",{className:"relative group",children:[e.jsx(P,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-orange-500 transition-colors z-10"}),e.jsx("input",{type:a?"text":"password",value:r,onChange:y=>s(y.target.value),className:"w-full h-12 pl-12 pr-12 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-orange-300 focus:border-orange-500 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300",placeholder:" Entrez votre nouveau mot de passe",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 z-10",children:a?e.jsx(D,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Confirmer le mot de passe"}),e.jsxs("div",{className:"relative group",children:[e.jsx(P,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-orange-500 transition-colors z-10"}),e.jsx("input",{type:a?"text":"password",value:t,onChange:y=>o(y.target.value),className:"w-full h-12 pl-12 pr-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-orange-300 focus:border-orange-500 bg-white text-gray-900 placeholder-gray-500 transition-all duration-300",placeholder:" Confirmez votre nouveau mot de passe",required:!0,minLength:6})]})]}),e.jsx(i.button,{type:"submit",disabled:l,className:"w-full h-12 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 text-base font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.02},whileTap:{scale:.98},children:l?e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Mise à jour..."})]}):"🔐 Mettre à jour le mot de passe"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"button",onClick:()=>window.location.href="/",className:"text-gray-500 hover:text-gray-700 text-sm font-medium transition-colors",children:"← Retour à l'accueil"})})]})})},se=({particleCount:r=50,colors:s=["#f97316","#3b82f6","#10b981","#8b5cf6"],animated:t=!0})=>{const o=Array.from({length:r},(a,n)=>({id:n,x:Math.random()*100,y:Math.random()*100,size:Math.random()*4+2,color:s[Math.floor(Math.random()*s.length)],delay:Math.random()*5,duration:Math.random()*10+10}));return e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(i.div,{className:"absolute inset-0",style:{background:"linear-gradient(45deg, rgba(249,115,22,0.03), rgba(59,130,246,0.03), rgba(16,185,129,0.03))",backgroundSize:"400% 400%"},animate:t?{backgroundPosition:["0% 50%","100% 50%","0% 50%"]}:{},transition:{duration:20,repeat:1/0,ease:"linear"}}),o.map(a=>e.jsx(i.div,{className:"absolute rounded-full opacity-20",style:{left:`${a.x}%`,top:`${a.y}%`,width:a.size,height:a.size,backgroundColor:a.color},animate:t?{y:[0,-100,0],x:[0,Math.random()*50-25,0],scale:[1,1.5,1],opacity:[.1,.5,.1],rotate:[0,360]}:{},transition:{duration:a.duration,repeat:1/0,delay:a.delay,ease:"easeInOut"}},a.id)),[...Array(8)].map((a,n)=>e.jsxs(i.div,{className:"absolute opacity-5",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:Math.random()*100+50,height:Math.random()*100+50},animate:t?{rotate:[0,360],scale:[1,1.2,1],opacity:[.02,.08,.02]}:{},transition:{duration:15+n*2,repeat:1/0,ease:"linear"},children:[n%3===0&&e.jsx("div",{className:"w-full h-full border-2 border-blue-400 rounded-full",style:{borderStyle:"dashed"}}),n%3===1&&e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-orange-400/10 to-transparent",style:{clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"}}),n%3===2&&e.jsx("div",{className:"w-full h-full border-2 border-green-400",style:{borderStyle:"dotted",transform:"rotate(45deg)"}})]},`shape-${n}`)),e.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[[...Array(6)].map((a,n)=>e.jsx(i.line,{x1:`${Math.random()*100}%`,y1:`${Math.random()*100}%`,x2:`${Math.random()*100}%`,y2:`${Math.random()*100}%`,stroke:"url(#gradient)",strokeWidth:"1",opacity:"0.1",animate:t?{pathLength:[0,1,0],opacity:[0,.3,0]}:{},transition:{duration:4+n*.5,repeat:1/0,delay:n*.8,ease:"easeInOut"}},`line-${n}`)),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#f97316"}),e.jsx("stop",{offset:"50%",stopColor:"#3b82f6"}),e.jsx("stop",{offset:"100%",stopColor:"#10b981"})]})})]})]})},qt={fadeInUp:{hidden:{opacity:0,y:60,scale:.8},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:12,duration:.6}}},staggerChildren:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},parallax:{hidden:{opacity:0,y:100,rotateX:-15},visible:{opacity:1,y:0,rotateX:0,transition:{type:"spring",stiffness:80,damping:20}}},slideRotate:{hidden:{opacity:0,x:-100,rotate:-10,scale:.8},visible:{opacity:1,x:0,rotate:0,scale:1,transition:{type:"spring",stiffness:120,damping:15}}}},re={dots:{animate:{scale:[1,1.2,1],opacity:[.5,1,.5],transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}}},morphSpin:{animate:{rotate:360,borderRadius:["20%","50%","20%"],scale:[1,1.1,1],transition:{duration:2,repeat:1/0,ease:"easeInOut"}}},ripple:{animate:{scale:[1,2.5],opacity:[1,0],transition:{duration:1.5,repeat:1/0,ease:"easeOut"}}}},z=({children:r,variant:s="fadeInUp",delay:t=0,className:o="",once:a=!0})=>{const n=he(),l=h.useRef(null),g=ge(l,{once:a,margin:"-100px"});h.useEffect(()=>{g?n.start("visible"):a||n.start("hidden")},[g,n,a]);const u=()=>qt[s];return e.jsx(i.div,{ref:l,className:o,variants:u(),initial:"hidden",animate:n,transition:{delay:t},children:r})},Vt=({children:r,className:s="",staggerDelay:t=.1})=>{const o=he(),a=h.useRef(null),n=ge(a,{once:!0,margin:"-50px"});return h.useEffect(()=>{n&&o.start("visible")},[n,o]),e.jsx(i.div,{ref:a,className:s,variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:t,delayChildren:.1}}},initial:"hidden",animate:o,children:r.map((l,g)=>e.jsx(i.div,{variants:{hidden:{opacity:0,y:50,scale:.8,rotateX:-15},visible:{opacity:1,y:0,scale:1,rotateX:0,transition:{type:"spring",stiffness:100,damping:12}}},children:l},g))})},Bt=({variant:r="morphSpin",size:s="md",color:t="#f97316"})=>{const o={sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16"},a={sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"};return r==="dots"?e.jsx("div",{className:"flex space-x-2",children:[...Array(3)].map((n,l)=>e.jsx(i.div,{className:`${a[s]} rounded-full`,style:{backgroundColor:t},variants:re.dots,animate:"animate",transition:{delay:l*.2}},l))}):r==="ripple"?e.jsx("div",{className:`relative ${o[s]}`,children:[...Array(3)].map((n,l)=>e.jsx(i.div,{className:"absolute inset-0 border-2 rounded-full",style:{borderColor:t},variants:re.ripple,animate:"animate",transition:{delay:l*.3}},l))}):r==="orbital"?e.jsxs("div",{className:`relative ${o[s]}`,children:[e.jsx(i.div,{className:"absolute inset-1/3 rounded-full",style:{backgroundColor:t},animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),[...Array(3)].map((n,l)=>e.jsx(i.div,{className:"absolute inset-0",animate:{rotate:360},transition:{duration:2-l*.3,repeat:1/0,ease:"linear"},children:e.jsx("div",{className:"w-2 h-2 rounded-full absolute",style:{backgroundColor:t,top:`${10+l*15}%`,left:"50%",transform:"translateX(-50%)",opacity:.7-l*.2}})},l))]}):r==="pulse"?e.jsxs("div",{className:`relative ${o[s]}`,children:[[...Array(4)].map((n,l)=>e.jsx(i.div,{className:"absolute inset-0 rounded-full border-2",style:{borderColor:t},animate:{scale:[0,1],opacity:[1,0]},transition:{duration:2,delay:l*.5,repeat:1/0,ease:"easeOut"}},l)),e.jsx("div",{className:"absolute inset-2 rounded-full",style:{backgroundColor:t}})]}):r==="wave"?e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((n,l)=>e.jsx(i.div,{className:"w-1 bg-current rounded-full",style:{color:t,height:s==="sm"?"16px":s==="md"?"24px":"32px"},animate:{scaleY:[1,2,1],opacity:[.3,1,.3]},transition:{duration:1,delay:l*.1,repeat:1/0,ease:"easeInOut"}},l))}):r==="spiral"?e.jsxs("div",{className:`relative ${o[s]}`,children:[e.jsx(i.div,{className:"absolute inset-0",animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:e.jsx("div",{className:"w-full h-full rounded-full border-4 border-transparent",style:{borderTopColor:t,borderRightColor:`${t}80`,borderBottomColor:`${t}40`,borderLeftColor:`${t}20`}})}),e.jsx(i.div,{className:"absolute inset-2",animate:{rotate:-360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx("div",{className:"w-full h-full rounded-full border-2 border-transparent",style:{borderTopColor:`${t}60`,borderLeftColor:`${t}30`}})})]}):r==="bounce"?e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(3)].map((n,l)=>e.jsx(i.div,{className:`${a[s]} rounded-full`,style:{backgroundColor:t},animate:{y:[0,-20,0],scale:[1,1.2,1]},transition:{duration:.8,delay:l*.2,repeat:1/0,ease:"easeInOut"}},l))}):e.jsx(i.div,{className:`${o[s]} rounded-lg`,style:{backgroundColor:t},variants:re.morphSpin,animate:"animate"})},Jt=()=>{const{hasAccessToSite:r,logout:s}=$();h.useEffect(()=>{const o=()=>{const c=localStorage.getItem("oxo-login-time");return c&&Date.now()-parseInt(c)>36e5?(console.log("⏰ Session expirée après 1 heure - déconnexion"),localStorage.removeItem("oxo-login-time"),!0):!1},a=()=>{r&&(localStorage.getItem("oxo-login-time")||(localStorage.setItem("oxo-login-time",Date.now().toString()),console.log("🕐 Temps de connexion enregistré")))},n=()=>{r&&o()&&s()},l=()=>{!document.hidden&&r&&(console.log("👁️ Retour sur la page - vérification de session"),o()&&s())},g=()=>{r&&(console.log("🔄 Page chargée - vérification de session"),o()&&s())},u=()=>{console.log("🚪 Page sur le point de se fermer")};a(),n();const m=setInterval(()=>{n()},3e4);return document.addEventListener("visibilitychange",l),window.addEventListener("pageshow",g),window.addEventListener("beforeunload",u),()=>{clearInterval(m),document.removeEventListener("visibilitychange",l),window.removeEventListener("pageshow",g),window.removeEventListener("beforeunload",u)}},[r,s])},Wt=()=>{const{hasAccessToSite:r}=$();h.useEffect(()=>{r||(localStorage.removeItem("oxo-login-time"),console.log("🧹 Session nettoyée"))},[r])};function Xt(){const[r,s]=h.useState("agents"),[t,o]=h.useState(!0),[a,n]=h.useState(null),[l,g]=h.useState(!1),{hasAccessToSite:u,mode:m,initializeAuth:c}=$(),{loadAgents:N}=Ie();Jt(),Wt(),h.useEffect(()=>{c()},[c]),h.useEffect(()=>{const d=setTimeout(()=>{o(!1)},1e3);return()=>clearTimeout(d)},[]),h.useEffect(()=>{t||N()},[t,N]),h.useEffect(()=>{r==="admin"&&m!=="admin"&&s("agents")},[m,r]);const w=d=>{d==="admin"&&m!=="admin"||s(d)},y=()=>{n(null),g(!1)};return window.location.hash==="#reset-password"||window.location.pathname==="/auth/reset-password"?e.jsx(Dt,{}):t?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-orange-50 flex items-center justify-center relative overflow-hidden",children:[e.jsx(se,{particleCount:30,animated:!0}),e.jsxs(i.div,{className:"text-center relative z-10",initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},transition:{type:"spring",stiffness:100,damping:20,duration:.8},children:[e.jsxs(i.div,{className:"w-20 h-20 bg-gradient-primary rounded-2xl flex items-center justify-center mb-6 mx-auto relative hover-lift",animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[e.jsx(Bt,{variant:"orbital",size:"md",color:"#ffffff"}),e.jsx(i.div,{className:"absolute inset-0 rounded-2xl bg-orange-500/20",animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0,ease:"easeOut"}})]}),e.jsx(i.h2,{className:"text-4xl font-bold text-gradient mb-3 animate-shimmer",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:3,repeat:1/0,ease:"linear"},children:"OXO"}),e.jsx(i.p,{className:"text-gray-600 text-lg",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Chargement de la plateforme..."}),e.jsx("div",{className:"mt-6 space-y-2",children:[...Array(3)].map((d,p)=>e.jsx(i.div,{className:"h-1 bg-gray-200 rounded-full overflow-hidden",style:{width:`${60+p*20}px`},children:e.jsx(i.div,{className:"h-full bg-gradient-primary",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1.5,repeat:1/0,delay:p*.2,ease:"easeInOut"}})},p))})]}),[...Array(5)].map((d,p)=>e.jsx(i.div,{className:"absolute rounded-full border-2 border-orange-200/30",style:{width:100+p*50,height:100+p*50,left:"50%",top:"50%",marginLeft:-(50+p*25),marginTop:-(50+p*25)},animate:{rotate:360,scale:[1,1.1,1]},transition:{duration:10+p*2,repeat:1/0,ease:"linear"}},p))]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-orange-50/30 relative overflow-hidden",children:[e.jsx(se,{particleCount:40,animated:!0}),e.jsx(Lt,{currentView:r,onViewChange:w}),e.jsx("main",{className:"pt-6 relative z-10",children:u?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r==="agents"?e.jsxs(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.4,type:"spring",stiffness:100},children:[e.jsx(z,{variant:"fadeInUp",children:e.jsxs("div",{className:"mb-8",children:[e.jsx(i.h1,{className:"text-4xl font-bold text-gray-900 mb-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:"Base d'agents"}),e.jsx(i.p,{className:"text-gray-600 text-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:"Découvrez et contactez des agents vérifiés sur différentes plateformes."})]})}),e.jsx(z,{variant:"slideRotate",delay:.2,children:e.jsx(Tt,{})})]},"agents"):e.jsxs(i.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.4,type:"spring",stiffness:100},children:[e.jsx(z,{variant:"fadeInUp",children:e.jsxs("div",{className:"mb-8",children:[e.jsx(i.h1,{className:"text-4xl font-bold text-gray-900 mb-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:"Administration"}),e.jsx(i.p,{className:"text-gray-600 text-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:"Gérez les paramètres de sécurité et les mots de passe de la plateforme."})]})}),e.jsx(z,{variant:"parallax",delay:.2,children:e.jsx($t,{})})]},"admin")}):e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(8)].map((d,p)=>e.jsx(i.div,{className:"absolute w-2 h-2 bg-gradient-to-r from-orange-400 to-purple-500 rounded-full opacity-60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{x:[0,Math.random()*100-50],y:[0,Math.random()*100-50],scale:[1,1.5,1],opacity:[.3,.8,.3]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:p*.3,ease:"easeInOut"}},p))}),e.jsxs(z,{variant:"fadeInUp",className:"text-center py-20 relative z-10",children:[e.jsxs(i.div,{className:"w-32 h-32 bg-gradient-to-br from-orange-500 via-red-500 to-purple-600 rounded-3xl flex items-center justify-center mb-12 mx-auto relative overflow-hidden",whileHover:{scale:1.1,rotate:[0,5,-5,0],boxShadow:"0 25px 60px rgba(249, 115, 22, 0.4)"},animate:{y:[0,-10,0],rotateY:[0,10,0,-10,0]},transition:{y:{duration:4,repeat:1/0,ease:"easeInOut"},rotateY:{duration:6,repeat:1/0,ease:"easeInOut"}},children:[e.jsx("svg",{className:"w-16 h-16 text-white relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12",animate:{x:["-100%","200%"]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),[...Array(3)].map((d,p)=>e.jsx(i.div,{className:"absolute border-2 border-white/20 rounded-full",style:{width:140+p*20,height:140+p*20,left:-10-p*10,top:-10-p*10},animate:{rotate:360},transition:{duration:8+p*2,repeat:1/0,ease:"linear"}},p))]}),e.jsxs(i.h1,{className:"text-6xl md:text-8xl font-bold mb-8 relative",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},children:[e.jsx("span",{className:"text-gray-900",children:"Bienvenue sur "}),e.jsxs(i.span,{className:"text-gradient bg-gradient-to-r from-orange-500 via-red-500 to-purple-600 bg-clip-text text-transparent relative inline-block",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"],scale:[1,1.05,1]},transition:{backgroundPosition:{duration:3,repeat:1/0},scale:{duration:2,repeat:1/0,ease:"easeInOut"}},style:{backgroundSize:"200% 200%"},children:["OXO",[...Array(6)].map((d,p)=>e.jsx(i.div,{className:"absolute w-1 h-1 bg-orange-500 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{scale:[0,1,0],opacity:[0,1,0],x:[0,(Math.random()-.5)*50],y:[0,(Math.random()-.5)*50]},transition:{duration:2,repeat:1/0,delay:p*.3,ease:"easeOut"}},p))]})]}),e.jsxs(i.div,{className:"text-2xl text-gray-600 mb-16 max-w-3xl mx-auto leading-relaxed",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6,duration:.8},children:[e.jsx(i.p,{initial:{width:0},animate:{width:"100%"},transition:{delay:1,duration:2,ease:"easeInOut"},className:"overflow-hidden whitespace-nowrap border-r-2 border-orange-500 mx-auto",style:{borderRight:"2px solid #f97316"},children:"Votre plateforme professionnelle d'agents vérifiés"}),e.jsx(i.p,{className:"mt-4 text-lg",initial:{opacity:0},animate:{opacity:1},transition:{delay:3,duration:1},children:"WhatsApp • WeChat et plus encore"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-20",children:[{icon:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),title:"Agents Vérifiés",description:"Tous nos agents sont vérifiés et garantis actifs pour assurer la qualité des échanges.",color:"rgba(59, 130, 246, 0.3)",delay:.2},{icon:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),title:"Multi-Plateformes",description:"Contactez des agents sur WhatsApp, WeChat et autres plateformes.",color:"rgba(16, 185, 129, 0.3)",delay:.4},{icon:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),title:"Accès Instantané",description:"Contactez directement les agents via leur plateforme préférée en un clic.",color:"rgba(139, 92, 246, 0.3)",delay:.6}].map((d,p)=>e.jsxs(i.div,{className:"glass-card p-8 text-center hover-lift group relative overflow-hidden",initial:{opacity:0,y:60,rotateX:-15},animate:{opacity:1,y:0,rotateX:0},transition:{delay:d.delay,duration:.8,type:"spring",stiffness:100},whileHover:{y:-12,rotateY:5,scale:1.03,transition:{duration:.3}},children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(3)].map((j,v)=>e.jsx(i.div,{className:"absolute w-1 h-1 bg-orange-400 rounded-full opacity-40",style:{left:`${20+v*30}%`,top:`${20+v*20}%`},animate:{y:[0,-15,0],opacity:[.2,.6,.2],scale:[1,1.5,1]},transition:{duration:2+v*.5,repeat:1/0,delay:v*.4,ease:"easeInOut"}},v))}),e.jsxs(i.div,{className:"w-14 h-14 rounded-xl flex items-center justify-center mb-6 mx-auto relative",style:{background:`linear-gradient(135deg, ${d.color}, rgba(255,255,255,0.1))`},animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},whileHover:{scale:1.2,rotate:[0,10,-10,0],transition:{duration:.3}},children:[d.icon,e.jsx(i.div,{className:"absolute inset-0 rounded-xl border border-white/20",animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"}})]}),e.jsxs(i.h3,{className:"text-xl font-bold text-gray-900 mb-3 group-hover:text-orange-600 transition-colors relative",initial:{opacity:0},animate:{opacity:1},transition:{delay:d.delay+.3},children:[d.title,e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-orange-400/10 to-transparent opacity-0 group-hover:opacity-100",animate:{x:["-100%","100%"]},transition:{duration:1.5,ease:"easeInOut"}})]}),e.jsx(i.p,{className:"text-gray-600 text-sm leading-relaxed",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:d.delay+.5},children:d.description}),e.jsx(i.div,{className:"absolute bottom-0 left-0 h-0.5 bg-gradient-to-r from-orange-500 to-purple-500 rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{delay:d.delay+.8,duration:1.2,ease:"easeOut"}})]},p))}),e.jsx(z,{variant:"fadeInUp",delay:.6,className:"mt-20",children:e.jsx("div",{className:"glass-card p-8 bg-gradient-to-r from-blue-50/50 to-orange-50/50 border-2 border-orange-200/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx(i.div,{className:"w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-4",animate:{rotate:[0,10,-10,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"🔐 Accès Sécurisé Requis"}),e.jsx("p",{className:"text-gray-700 mb-6 text-lg",children:"Connectez-vous pour accéder à la base de données complète d'agents vérifiés."})]})})}),e.jsx(z,{variant:"fadeInUp",delay:.8,className:"mt-12",children:e.jsx("div",{className:"max-w-lg mx-auto",children:e.jsxs(i.div,{className:"glass-card p-8 bg-gradient-to-r from-purple-50/70 to-blue-50/70 border-2 border-purple-200/40 text-center",whileHover:{scale:1.02},transition:{duration:.3},children:[e.jsxs(i.div,{className:"flex items-center justify-center space-x-3 mb-4",animate:{y:[0,-4,0]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},children:[e.jsx("span",{className:"text-3xl",children:"🔐"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Pas d'accès ?"})]}),e.jsxs("p",{className:"text-gray-700 mb-6 leading-relaxed",children:["Le ",e.jsx("strong",{className:"text-purple-700",children:"mot de passe change régulièrement"})," pour garantir la sécurité de notre plateforme.",e.jsx("br",{}),"Rejoignez notre ",e.jsx("strong",{className:"text-blue-700",children:"communauté exclusive"})," pour obtenir l'accès permanent !"]}),e.jsxs(i.a,{href:"https://whop.com/oxo/presentation-oxo-XeNskuhecJ4ew0/app/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold px-8 py-4 rounded-2xl transition-all duration-300 shadow-lg hover:shadow-2xl",whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(147, 51, 234, 0.4)"},whileTap:{scale:.95},children:[e.jsx("span",{className:"text-2xl",children:"🚀"}),e.jsx("span",{className:"text-lg",children:"Rejoindre la communauté OXO"}),e.jsx(i.span,{animate:{x:[0,5,0]},transition:{duration:1.5,repeat:1/0},className:"text-xl",children:"→"})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-lg mb-1",children:"⚡"}),e.jsx("span",{children:"Accès instantané"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-lg mb-1",children:"🛡️"}),e.jsx("span",{children:"Support 24/7"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-lg mb-1",children:"🔥"}),e.jsx("span",{children:"Mises à jour exclusives"})]})]})]})})})]})]})}),e.jsx(Ft,{isOpen:l,onClose:y,agent:a}),e.jsx(z,{variant:"fadeInUp",className:"mt-20",children:e.jsxs("footer",{className:"glass-effect border-t border-gray-200/50 relative overflow-hidden",children:[e.jsx(se,{particleCount:20,animated:!0}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs(i.div,{className:"flex items-center justify-center space-x-3 mb-6",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[e.jsx(i.div,{className:"w-8 h-8 bg-gradient-primary rounded-xl flex items-center justify-center",animate:{rotate:[0,5,-5,0],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.79 4 8.5 4s8.5-1.79 8.5-4V7M4 7c0 2.21 3.79 4 8.5 4s8.5-1.79 8.5-4M4 7c0-2.21 3.79-4 8.5-4s8.5 1.79 8.5 4"})})}),e.jsx("span",{className:"text-2xl font-bold text-gradient animate-shimmer",children:"OXO"})]}),e.jsx(i.p,{className:"text-gray-500 text-sm mb-6",initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.2},children:"© 2025 OXO - Plateforme professionnelle d'agents vérifiés"}),e.jsx(Vt,{className:"flex items-center justify-center space-x-6 text-xs text-gray-400",staggerDelay:.1,children:[{icon:"🔒",text:"Données sécurisées"},{icon:"✅",text:"Agents vérifiés"},{icon:"⚡",text:"Accès instantané"}].map((d,p)=>e.jsxs(i.span,{className:"flex items-center space-x-1 hover:text-orange-500 transition-colors cursor-pointer",whileHover:{scale:1.1,y:-2},children:[e.jsx("span",{children:d.icon}),e.jsx("span",{children:d.text})]},p))})]})}),e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-orange-100/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:8,repeat:1/0,ease:"linear"}})]})})]})}ae.createRoot(document.getElementById("root")).render(e.jsx(xe.StrictMode,{children:e.jsx(Xt,{})}));
